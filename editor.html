<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸš€ WebMaster Pro Ultimate - ××“×™×˜×•×¨ ××”×¤×›× ×™ ×¢× AI ×××™×ª×™</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --bg-primary: #0f0f23;
            --bg-secondary: #1e1e3f;
            --bg-tertiary: #2a2a5a;
            --text-primary: #ffffff;
            --text-secondary: #b8b8d4;
            --accent-neon: #00ffff;
            --accent-purple: #8b5cf6;
            --accent-pink: #f471b5;
            --success: #10b981;
            --warning: #f59e0b;
            --error: #ef4444;
            --glass-bg: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
            --glass-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            --gradient-primary: linear-gradient(135deg, var(--accent-neon) 0%, var(--accent-purple) 100%);
            --gradient-secondary: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-pink) 100%);
            --gradient-bg: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Heebo', sans-serif;
            background: var(--gradient-bg);
            color: var(--text-primary);
            overflow: hidden;
            height: 100vh;
        }

        /* API Settings Modal */
        .api-setup-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            backdrop-filter: blur(10px);
        }

        .api-setup-content {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 3rem;
            max-width: 600px;
            width: 90%;
            text-align: center;
            box-shadow: var(--glass-shadow);
        }

        .api-setup-title {
            font-size: 2rem;
            font-weight: 800;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 1rem;
        }

        .api-setup-description {
            font-size: 1.1rem;
            opacity: 0.9;
            margin-bottom: 2rem;
            line-height: 1.6;
        }

        .api-input-group {
            margin-bottom: 1.5rem;
            text-align: right;
        }

        .api-input-label {
            display: block;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--accent-neon);
        }

        .api-input {
            width: 100%;
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 10px;
            padding: 1rem;
            color: var(--text-primary);
            font-size: 0.9rem;
            direction: ltr;
        }

        .api-input:focus {
            outline: none;
            border-color: var(--accent-neon);
            box-shadow: 0 0 20px rgba(0,255,255,0.3);
        }

        .api-setup-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 2rem;
        }

        .api-btn {
            background: var(--gradient-primary);
            border: none;
            border-radius: 12px;
            padding: 1rem 2rem;
            color: var(--bg-primary);
            font-weight: 700;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .api-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 20px 40px rgba(0,255,255,0.4);
        }

        .api-btn.secondary {
            background: var(--glass-bg);
            color: var(--text-primary);
            border: 1px solid var(--glass-border);
        }

        .api-status {
            margin-top: 1rem;
            padding: 0.8rem;
            border-radius: 10px;
            font-size: 0.9rem;
            display: none;
        }

        .api-status.success {
            background: rgba(16,185,129,0.2);
            border: 1px solid var(--success);
            color: var(--success);
            display: block;
        }

        .api-status.error {
            background: rgba(239,68,68,0.2);
            border: 1px solid var(--error);
            color: var(--error);
            display: block;
        }

        /* Loading Screen */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--gradient-bg);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 0.5s ease;
        }

        .loading-content {
            text-align: center;
            animation: fadeInScale 1s ease-out;
        }

        .loading-logo {
            font-size: 3rem;
            font-weight: 900;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 1rem;
        }

        .loading-text {
            font-size: 1.2rem;
            margin-bottom: 2rem;
            opacity: 0.9;
        }

        .loading-features {
            font-size: 0.9rem;
            opacity: 0.7;
            line-height: 1.8;
            margin-bottom: 2rem;
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 3px solid rgba(255,255,255,0.3);
            border-top: 3px solid var(--accent-neon);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        @keyframes fadeInScale {
            0% { opacity: 0; transform: scale(0.8); }
            100% { opacity: 1; transform: scale(1); }
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Layout */
        .editor-container {
            display: grid;
            grid-template-rows: 70px 1fr 50px;
            height: 100vh;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .editor-container.loaded {
            opacity: 1;
        }

        /* Header */
        .editor-header {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--glass-border);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 1rem;
            z-index: 1000;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 800;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .website-selector {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 10px;
            padding: 0.5rem 1rem;
            color: var(--text-primary);
            font-size: 0.9rem;
            min-width: 350px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .website-selector:hover {
            border-color: var(--accent-neon);
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.3);
        }

        .website-selector option {
            background: var(--bg-secondary);
            color: var(--text-primary);
        }

        .header-center {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .device-buttons {
            display: flex;
            gap: 0.5rem;
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 8px;
            padding: 0.3rem;
        }

        .device-btn {
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 0.4rem 0.8rem;
            border-radius: 6px;
            transition: all 0.3s ease;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }

        .device-btn.active {
            background: var(--accent-neon);
            color: var(--bg-primary);
            font-weight: 600;
        }

        .device-btn:hover:not(.active) {
            background: var(--glass-bg);
            color: var(--text-primary);
        }

        .header-right {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        .btn {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 8px;
            padding: 0.5rem 1rem;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            text-decoration: none;
        }

        .btn:hover {
            background: var(--accent-neon);
            color: var(--bg-primary);
            transform: translateY(-2px);
            box-shadow: var(--glass-shadow);
        }

        .btn.primary {
            background: var(--gradient-primary);
            color: var(--bg-primary);
            font-weight: 600;
        }

        .btn.success {
            background: var(--success);
            color: white;
        }

        .btn.warning {
            background: var(--warning);
            color: white;
        }

        .btn.danger {
            background: var(--error);
            color: white;
        }

        /* Main Content */
        .main-content {
            display: grid;
            grid-template-columns: 380px 1fr 350px;
            height: calc(100vh - 120px);
            gap: 1px;
            transition: all 0.3s ease;
        }

        .main-content.fullscreen {
            grid-template-columns: 0 1fr 0;
        }

        /* Left Panel - AI Tools */
        .left-panel {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border-right: 1px solid var(--glass-border);
            padding: 1rem;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 1rem;
            transition: all 0.3s ease;
        }

        .left-panel.hidden {
            width: 0;
            padding: 0;
            overflow: hidden;
        }

        .panel-section {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            padding: 1rem;
            box-shadow: var(--glass-shadow);
        }

        .section-title {
            font-size: 1rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: var(--accent-neon);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* Ultra AI Assistant */
        .ultra-ai-assistant {
            background: linear-gradient(135deg, rgba(0,255,255,0.15) 0%, rgba(139,92,246,0.15) 100%);
            border: 2px solid rgba(0,255,255,0.4);
            border-radius: 15px;
            padding: 1.5rem;
            position: relative;
            overflow: hidden;
        }

        .ultra-ai-assistant::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: conic-gradient(from 0deg, transparent, rgba(0,255,255,0.15), transparent);
            animation: rotate 8s linear infinite;
            pointer-events: none;
        }

        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .ai-content {
            position: relative;
            z-index: 1;
        }

        .ai-mode-selector {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
            background: rgba(0,0,0,0.2);
            border-radius: 8px;
            padding: 0.3rem;
        }

        .ai-mode {
            flex: 1;
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 6px;
            transition: all 0.3s ease;
            font-size: 0.8rem;
        }

        .ai-mode.active {
            background: var(--accent-neon);
            color: var(--bg-primary);
            font-weight: 600;
        }

        .ai-input {
            width: 100%;
            background: rgba(255,255,255,0.1);
            border: 1px solid var(--glass-border);
            border-radius: 10px;
            padding: 1rem;
            color: var(--text-primary);
            margin-bottom: 1rem;
            min-height: 120px;
            resize: vertical;
            font-family: inherit;
            font-size: 0.9rem;
        }

        .ai-input:focus {
            outline: none;
            border-color: var(--accent-neon);
            box-shadow: 0 0 20px rgba(0,255,255,0.3);
        }

        .ai-input::placeholder {
            color: var(--text-secondary);
        }

        .ai-quick-actions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .ai-quick-action {
            background: rgba(255,255,255,0.1);
            border: 1px solid var(--glass-border);
            border-radius: 8px;
            padding: 0.7rem 0.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.75rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.3rem;
        }

        .ai-quick-action:hover {
            background: var(--accent-neon);
            color: var(--bg-primary);
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0,255,255,0.3);
        }

        .ai-execute-btn {
            width: 100%;
            background: var(--gradient-primary);
            border: none;
            border-radius: 12px;
            padding: 1rem;
            color: var(--bg-primary);
            font-weight: 700;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .ai-execute-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 20px 40px rgba(0,255,255,0.4);
        }

        .ai-execute-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        /* Image Generation */
        .image-generator {
            background: linear-gradient(135deg, rgba(244,114,182,0.15) 0%, rgba(236,72,153,0.15) 100%);
            border: 2px solid rgba(244,114,182,0.4);
            border-radius: 15px;
            padding: 1.5rem;
        }

        .image-input {
            width: 100%;
            background: rgba(255,255,255,0.1);
            border: 1px solid var(--glass-border);
            border-radius: 10px;
            padding: 1rem;
            color: var(--text-primary);
            margin-bottom: 1rem;
            min-height: 80px;
            resize: vertical;
            font-family: inherit;
            font-size: 0.9rem;
        }

        .image-style-selector {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .image-style {
            background: rgba(255,255,255,0.1);
            border: 1px solid var(--glass-border);
            border-radius: 6px;
            padding: 0.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.75rem;
        }

        .image-style.active {
            background: var(--accent-pink);
            color: var(--bg-primary);
            font-weight: 600;
        }

        .generate-image-btn {
            width: 100%;
            background: var(--gradient-secondary);
            border: none;
            border-radius: 12px;
            padding: 1rem;
            color: white;
            font-weight: 700;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .generate-image-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 20px 40px rgba(244,114,182,0.4);
        }

        .generate-image-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .generated-images {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .generated-image {
            aspect-ratio: 1;
            border-radius: 10px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .generated-image:hover {
            border-color: var(--accent-pink);
            transform: scale(1.05);
        }

        .generated-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* Business Customizer */
        .business-customizer {
            background: linear-gradient(135deg, rgba(16,185,129,0.15) 0%, rgba(6,182,212,0.15) 100%);
            border: 2px solid rgba(16,185,129,0.4);
            border-radius: 15px;
            padding: 1.5rem;
        }

        .business-input-group {
            margin-bottom: 1rem;
        }

        .business-input-label {
            display: block;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--success);
            font-size: 0.9rem;
        }

        .business-input {
            width: 100%;
            background: rgba(255,255,255,0.1);
            border: 1px solid var(--glass-border);
            border-radius: 8px;
            padding: 0.8rem;
            color: var(--text-primary);
            font-size: 0.85rem;
        }

        .business-input:focus {
            outline: none;
            border-color: var(--success);
            box-shadow: 0 0 15px rgba(16,185,129,0.3);
        }

        .customize-business-btn {
            width: 100%;
            background: linear-gradient(135deg, var(--success) 0%, #06b6d4 100%);
            border: none;
            border-radius: 12px;
            padding: 1rem;
            color: white;
            font-weight: 700;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .customize-business-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 20px 40px rgba(16,185,129,0.4);
        }

        /* Advanced Tools */
        .advanced-tools {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.5rem;
        }

        .advanced-tool {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 8px;
            padding: 0.8rem 0.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.75rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.3rem;
        }

        .advanced-tool:hover {
            background: var(--accent-purple);
            color: white;
            transform: translateY(-2px);
        }

        .advanced-tool i {
            font-size: 1.2rem;
        }

        /* Center Panel - Website Preview */
        .center-panel {
            background: #f8f9fa;
            display: flex;
            flex-direction: column;
            position: relative;
            overflow: hidden;
        }

        .preview-toolbar {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--glass-border);
            padding: 0.5rem 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .preview-info {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .preview-frame {
            flex: 1;
            border: none;
            background: white;
            margin: 1rem;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            transition: all 0.5s ease;
            transform-origin: top center;
        }

        .preview-frame.desktop {
            width: calc(100% - 2rem);
        }

        .preview-frame.tablet {
            width: 768px;
            max-width: calc(100% - 2rem);
            margin: 1rem auto;
        }

        .preview-frame.mobile {
            width: 375px;
            max-width: calc(100% - 2rem);
            margin: 1rem auto;
        }

        .no-website-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--gradient-bg);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            z-index: 100;
            transition: all 0.3s ease;
        }

        .no-website-overlay.hidden {
            opacity: 0;
            visibility: hidden;
        }

        .overlay-content {
            text-align: center;
            max-width: 600px;
            padding: 2rem;
        }

        .overlay-content h3 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .overlay-content p {
            font-size: 1.2rem;
            margin-bottom: 1rem;
            opacity: 0.9;
        }

        .website-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin: 2rem 0;
        }

        .stat-card {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            padding: 1rem;
            text-align: center;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 900;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .stat-label {
            font-size: 0.8rem;
            opacity: 0.7;
            margin-top: 0.5rem;
        }

        /* Right Panel - Properties */
        .right-panel {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border-left: 1px solid var(--glass-border);
            padding: 1rem;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 1rem;
            transition: all 0.3s ease;
        }

        .right-panel.hidden {
            width: 0;
            padding: 0;
            overflow: hidden;
        }

        /* Live Element Editor */
        .live-element-editor {
            background: linear-gradient(135deg, rgba(16,185,129,0.15) 0%, rgba(6,182,212,0.15) 100%);
            border: 2px solid rgba(16,185,129,0.4);
            border-radius: 15px;
            padding: 1.5rem;
        }

        .element-editor-content {
            display: none;
        }

        .element-editor-content.active {
            display: block;
        }

        .editor-field {
            margin-bottom: 1rem;
        }

        .editor-label {
            display: block;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--success);
            font-size: 0.9rem;
        }

        .editor-input {
            width: 100%;
            background: rgba(255,255,255,0.1);
            border: 1px solid var(--glass-border);
            border-radius: 8px;
            padding: 0.8rem;
            color: var(--text-primary);
            font-size: 0.85rem;
        }

        .editor-input:focus {
            outline: none;
            border-color: var(--success);
            box-shadow: 0 0 15px rgba(16,185,129,0.3);
        }

        .editor-buttons {
            display: flex;
            gap: 0.5rem;
        }

        .editor-btn {
            flex: 1;
            background: var(--success);
            border: none;
            border-radius: 8px;
            padding: 0.6rem;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.8rem;
        }

        .editor-btn:hover {
            background: #059669;
            transform: translateY(-2px);
        }

        .editor-btn.danger {
            background: var(--error);
        }

        .editor-btn.danger:hover {
            background: #dc2626;
        }

        /* Color System */
        .color-system {
            background: linear-gradient(135deg, rgba(245,158,11,0.15) 0%, rgba(239,68,68,0.15) 100%);
            border: 2px solid rgba(245,158,11,0.4);
            border-radius: 15px;
            padding: 1.5rem;
        }

        .color-palette {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .color-swatch {
            aspect-ratio: 1;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            position: relative;
        }

        .color-swatch:hover {
            border-color: white;
            transform: scale(1.1);
        }

        .color-swatch.active {
            border-color: var(--accent-neon);
            transform: scale(1.15);
        }

        .color-picker-container {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .color-preview {
            width: 50px;
            height: 50px;
            border: 2px solid var(--glass-border);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .color-preview:hover {
            transform: scale(1.1);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .color-input {
            flex: 1;
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 8px;
            padding: 0.8rem;
            color: var(--text-primary);
            font-size: 0.85rem;
        }

        .color-actions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.5rem;
        }

        .color-action-btn {
            background: var(--warning);
            border: none;
            border-radius: 8px;
            padding: 0.6rem;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.8rem;
        }

        .color-action-btn:hover {
            background: #d97706;
            transform: translateY(-2px);
        }

        /* Status Bar */
        .status-bar {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border-top: 1px solid var(--glass-border);
            padding: 0.7rem 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.8rem;
        }

        .status-left {
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }

        .status-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .status-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--success);
            animation: pulse 2s infinite;
        }

        .status-indicator.working {
            background: var(--warning);
            animation: fastPulse 0.5s infinite;
        }

        .status-indicator.error {
            background: var(--error);
            animation: none;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        @keyframes fastPulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        /* Notifications */
        .notification {
            position: fixed;
            top: 80px;
            right: 20px;
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            color: var(--text-primary);
            padding: 1rem 1.5rem;
            border-radius: 12px;
            border: 1px solid var(--glass-border);
            z-index: 10000;
            animation: slideInRight 0.3s ease-out;
            box-shadow: var(--glass-shadow);
            max-width: 400px;
            min-width: 300px;
        }

        .notification.success {
            border-left: 4px solid var(--success);
        }

        .notification.error {
            border-left: 4px solid var(--error);
        }

        .notification.warning {
            border-left: 4px solid var(--warning);
        }

        .notification.info {
            border-left: 4px solid var(--accent-neon);
        }

        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .main-content {
                grid-template-columns: 320px 1fr 300px;
            }
            
            .website-selector {
                min-width: 250px;
            }
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .left-panel, .right-panel {
                display: none;
            }

            .header-center {
                flex-direction: column;
                gap: 0.5rem;
            }

            .website-selector {
                min-width: 200px;
                font-size: 0.8rem;
            }
        }

        /* Animation Classes */
        .fade-in {
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .scale-in {
            animation: scaleIn 0.3s ease-out;
        }

        @keyframes scaleIn {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        /* Loading States */
        .loading {
            position: relative;
            overflow: hidden;
        }

        .loading::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
            animation: shimmer 1.5s infinite;
        }

        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }
    </style>
</head>
<body>
    <!-- API Setup Modal -->
    <div class="api-setup-modal" id="apiSetupModal">
        <div class="api-setup-content">
            <h2 class="api-setup-title">ğŸš€ ×”×’×“×¨×ª API Keys</h2>
            <p class="api-setup-description">
                ×›×“×™ ×œ×¤×ª×•×— ××ª ×”×¤×•×˜× ×¦×™××œ ×”××œ× ×©×œ WebMaster Pro, ×”×–×Ÿ ××ª ×”-API Keys ×©×œ×š.<br>
                <strong>×›×œ ×”××™×“×¢ × ×©××¨ ××§×•××™×ª ××¦×œ×š ×‘×“×¤×“×¤×Ÿ ×‘×œ×‘×“!</strong>
            </p>
            
            <div class="api-input-group">
                <label class="api-input-label">OpenAI API Key (×™×© ×œ×š ×× ×•×™):</label>
                <input type="password" class="api-input" id="openaiKey" placeholder="sk-..." />
            </div>
            
            <div class="api-input-group">
                <label class="api-input-label">Claude API Key (×™×© ×œ×š ×× ×•×™):</label>
                <input type="password" class="api-input" id="claudeKey" placeholder="sk-ant-..." />
            </div>
            
            <div class="api-input-group">
                <label class="api-input-label">Supabase URL (×—×™× × - https://supabase.com):</label>
                <input type="text" class="api-input" id="supabaseUrl" placeholder="https://your-project.supabase.co" />
            </div>
            
            <div class="api-input-group">
                <label class="api-input-label">Supabase Anon Key:</label>
                <input type="password" class="api-input" id="supabaseKey" placeholder="eyJ..." />
            </div>
            
            <div class="api-input-group">
                <label class="api-input-label">ImgBB API Key (×—×™× × - https://api.imgbb.com):</label>
                <input type="password" class="api-input" id="imgbbKey" placeholder="your-key" />
            </div>
            
            <div class="api-status" id="apiStatus"></div>
            
            <div class="api-setup-buttons">
                <button class="api-btn" onclick="testAndSaveAPIKeys()">
                    <i class="fas fa-check"></i>
                    ×‘×“×•×§ ×•×©××•×¨
                </button>
                <button class="api-btn secondary" onclick="skipAPISetup()">
                    ×“×œ×’ ×œ×¢×ª ×¢×ª×”
                </button>
            </div>
        </div>
    </div>

    <!-- Loading Screen -->
    <div class="loading-screen" id="loadingScreen" style="display: none;">
        <div class="loading-content">
            <div class="loading-logo">ğŸš€ WebMaster Pro Ultimate</div>
            <div class="loading-text">×˜×•×¢×Ÿ ××¢×¨×›×ª AI ××”×¤×›× ×™×ª...</div>
            <div class="loading-features">
                ğŸ¤– AI ×××™×ª×™ ×¢× OpenAI + Claude<br>
                ğŸ¨ ×™×¦×™×¨×ª ×ª××•× ×•×ª ××•×˜×•××˜×™×ª<br>
                âœ¨ ×¢×¨×™×›×” ×‘×–××Ÿ ×××ª<br>
                ğŸ’¾ ×©××™×¨×” ×‘×¢× ×Ÿ<br>
                ğŸš€ ×¤×¨×¡×•× ××™×™×“×™<br>
                ğŸ’ ×¢×¨×š: â‚ª26,900 - ×œ×œ× ×”×’×‘×œ×”
            </div>
            <div class="loading-spinner"></div>
        </div>
    </div>

    <!-- Main Editor -->
    <div class="editor-container" id="editorContainer">
        
        <!-- Header -->
        <div class="editor-header">
            <div class="header-left">
                <div class="logo">
                    <i class="fas fa-rocket"></i>
                    WebMaster Pro Ultimate
                </div>
                
                <select class="website-selector" id="websiteSelector" onchange="loadWebsite(this.value)">
                    <option value="">ğŸ¯ ×‘×—×¨ ××ª×¨ ×œ×¢×¨×™×›×” (11 ××ª×¨×™× ××§×¦×•×¢×™×™× - â‚ª26,900)</option>
                </select>
            </div>
            
            <div class="header-center">
                <div class="device-buttons">
                    <button class="device-btn active" onclick="setDevice('desktop')" id="desktopBtn">
                        <i class="fas fa-desktop"></i>
                        Desktop
                    </button>
                    <button class="device-btn" onclick="setDevice('tablet')" id="tabletBtn">
                        <i class="fas fa-tablet-alt"></i>
                        Tablet
                    </button>
                    <button class="device-btn" onclick="setDevice('mobile')" id="mobileBtn">
                        <i class="fas fa-mobile-alt"></i>
                        Mobile
                    </button>
                </div>
            </div>
            
            <div class="header-right">
                <button class="btn" onclick="openAPISettings()" title="×”×’×“×¨×•×ª API">
                    <i class="fas fa-key"></i>
                    API
                </button>
                <button class="btn" onclick="togglePanels()" id="fullscreenBtn" title="××¡×š ××œ× (F11)">
                    <i class="fas fa-expand-arrows-alt"></i>
                </button>
                <button class="btn success" onclick="saveWebsite()" title="×©××•×¨ (Ctrl+S)">
                    <i class="fas fa-save"></i>
                    ×©××•×¨
                </button>
                <button class="btn primary" onclick="publishWebsite()" title="×¤×¨×¡× ××ª×¨">
                    <i class="fas fa-rocket"></i>
                    ×¤×¨×¡×
                </button>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content" id="mainContent">
            
            <!-- Left Panel - Ultra AI Tools -->
            <div class="left-panel" id="leftPanel">
                
                <!-- Ultra AI Assistant -->
                <div class="ultra-ai-assistant">
                    <div class="ai-content">
                        <div class="section-title">
                            <i class="fas fa-brain"></i>
                            Ultra AI Assistant
                        </div>
                        
                        <div class="ai-mode-selector">
                            <button class="ai-mode active" onclick="setAIMode('openai')" id="openaiMode">
                                <i class="fas fa-robot"></i>
                                OpenAI
                            </button>
                            <button class="ai-mode" onclick="setAIMode('claude')" id="claudeMode">
                                <i class="fas fa-brain"></i>
                                Claude
                            </button>
                        </div>
                        
                        <textarea 
                            class="ai-input" 
                            id="aiInput" 
                            placeholder="ğŸ¤– ×”×•×¨××•×ª AI ××ª×§×“××•×ª ×•×××™×ª×™×•×ª:

ğŸ“ '×›×ª×•×‘ ×ª×•×›×Ÿ ×©×™×•×•×§×™ ××§×¦×•×¢×™ ×œ××¨×¤××ª ×©×™× ×™×™× ×¢× ×›×œ ×”×¤×¨×˜×™×'
ğŸ¨ '×©× ×” ××ª ×”×¢×™×¦×•×‘ ×œ×”×™×•×ª ××•×“×¨× ×™ ×™×•×ª×¨ ×‘×¦×‘×¢×™× ×›×—×•×œ×™× ×•×™×¨×•×§×™×'
ğŸ“± '×ª×¢×©×” ××•×¤×˜×™××™×–×¦×™×” ××œ××” ×œ×˜×œ×¤×•× ×™× × ×™×™×“×™× ×¢× ×›×¤×ª×•×¨×™× ×’×“×•×œ×™×'
ğŸ–¼ï¸ '×¦×•×¨ ×ª××•× ×” ×©×œ ×¨×•×¤× ×©×™× ×™×™× ××§×¦×•×¢×™ ×‘××¨×¤××” ××•×“×¨× ×™×ª'
ğŸ“ˆ '×©×¤×¨ ××ª ×”-SEO ×©×œ ×”××ª×¨ ×¢× ××™×œ×•×ª ××¤×ª×— ×œ×¨×¤×•××ª ×©×™× ×™×™×'
ğŸ’° '×”×•×¡×£ ××—×©×‘×•×Ÿ ×¢×œ×•×™×•×ª ×œ×˜×™×¤×•×œ×™ ×©×™× ×™×™× ×¢× ××—×™×¨×™×'
ğŸ“ '×”×•×¡×£ ×›×¤×ª×•×¨×™ WhatsApp ×•×˜×¤×¡×™ ×™×¦×™×¨×ª ×§×©×¨ ××ª×§×“××™×'
ğŸ¯ '×”×ª×× ××ª ×›×œ ×”×ª×•×›×Ÿ ×œ×¢×¡×§ ×©×œ×™: [×ª××¨ ××ª ×”×¢×¡×§ ×©×œ×š]'"
                        ></textarea>
                        
                        <div class="ai-quick-actions">
                            <div class="ai-quick-action" onclick="quickAI('business-content')">
                                <i class="fas fa-building"></i>
                                <span>×ª×•×›×Ÿ ×¢×¡×§×™</span>
                            </div>
                            <div class="ai-quick-action" onclick="quickAI('design-modern')">
                                <i class="fas fa-magic"></i>
                                <span>×¢×™×¦×•×‘ ××•×“×¨× ×™</span>
                            </div>
                            <div class="ai-quick-action" onclick="quickAI('seo-optimize')">
                                <i class="fas fa-search"></i>
                                <span>×©×¤×¨ SEO</span>
                            </div>
                            <div class="ai-quick-action" onclick="quickAI('mobile-optimize')">
                                <i class="fas fa-mobile-alt"></i>
                                <span>××•×¤×˜××™×–×¦×™×”</span>
                            </div>
                            <div class="ai-quick-action" onclick="quickAI('add-calculator')">
                                <i class="fas fa-calculator"></i>
                                <span>××—×©×‘×•×Ÿ</span>
                            </div>
                            <div class="ai-quick-action" onclick="quickAI('contact-forms')">
                                <i class="fas fa-envelope"></i>
                                <span>×˜×¤×¡×™ ×§×©×¨</span>
                            </div>
                        </div>
                        
                        <button class="ai-execute-btn" onclick="executeUltraAI()" id="aiExecuteBtn">
                            <i class="fas fa-magic"></i>
                            ×‘×¦×¢ ×¢× AI ×××™×ª×™
                        </button>
                    </div>
                </div>

                <!-- Image Generator -->
                <div class="image-generator">
                    <div class="section-title">
                        <i class="fas fa-image"></i>
                        ×™×•×¦×¨ ×ª××•× ×•×ª AI
                    </div>
                    
                    <textarea 
                        class="image-input" 
                        id="imageInput" 
                        placeholder="×ª××¨ ××ª ×”×ª××•× ×” ×©××ª×” ×¨×•×¦×”:

'×¨×•×¤× ×©×™× ×™×™× ××§×¦×•×¢×™ ×‘××¨×¤××” ××•×“×¨× ×™×ª'
'××××Ÿ ×›×•×©×¨ ×¢× ××©×§×•×œ×•×ª ×‘×—×“×¨ ×›×•×©×¨'
'××¡×¤×¨×” ×™×•×§×¨×ª×™×ª ×¢× ×›×¡××•×ª ××¢×•×¦×‘×™×'
'××©×¨×“ ×¢×•×¨×›×™ ×“×™×Ÿ ××œ×’× ×˜×™ ×•××§×¦×•×¢×™'
'×¡×˜×•×“×™×• ×™×•×’×” ×©×§×˜ ×¢× ××•×¨ ×˜×‘×¢×™'"
                    ></textarea>
                    
                    <div class="image-style-selector">
                        <div class="image-style active" onclick="setImageStyle('professional')" data-style="professional">
                            ğŸ“¸ ××§×¦×•×¢×™
                        </div>
                        <div class="image-style" onclick="setImageStyle('modern')" data-style="modern">
                            ğŸ¨ ××•×“×¨× ×™
                        </div>
                        <div class="image-style" onclick="setImageStyle('artistic')" data-style="artistic">
                            ğŸ–¼ï¸ ××× ×•×ª×™
                        </div>
                        <div class="image-style" onclick="setImageStyle('realistic')" data-style="realistic">
                            ğŸ“· ×¨×™××œ×™×¡×˜×™
                        </div>
                    </div>
                    
                    <button class="generate-image-btn" onclick="generateImage()" id="generateImageBtn">
                        <i class="fas fa-image"></i>
                        ×¦×•×¨ ×ª××•× ×” ×¢× AI
                    </button>
                    
                    <div class="generated-images" id="generatedImages">
                        <!-- Generated images will appear here -->
                    </div>
                </div>

                <!-- Business Customizer -->
                <div class="business-customizer">
                    <div class="section-title">
                        <i class="fas fa-store"></i>
                        ×”×ª×××” ×œ×¢×¡×§
                    </div>
                    
                    <div class="business-input-group">
                        <label class="business-input-label">×©× ×”×¢×¡×§:</label>
                        <input type="text" class="business-input" id="businessName" placeholder="×œ××©×œ: ××¨×¤××ª ×”×©×™× ×™×™× ×©×œ ×“&quot;×¨ ×›×”×Ÿ">
                    </div>
                    
                    <div class="business-input-group">
                        <label class="business-input-label">×ª×—×•× ×”×¢×¡×§:</label>
                        <select class="business-input" id="businessCategory">
                            <option value="">×‘×—×¨ ×ª×—×•×</option>
                            <option value="medical">×¨×¤×•××” ×•×‘×¨×™××•×ª</option>
                            <option value="beauty">×™×•×¤×™ ×•××¡×ª×˜×™×§×”</option>
                            <option value="fitness">×›×•×©×¨ ×•×ª×–×•× ×”</option>
                            <option value="legal">×©×™×¨×•×ª×™× ××©×¤×˜×™×™×</option>
                            <option value="education">×—×™× ×•×š ×•×”×•×¨××”</option>
                            <option value="business">×¢×¡×§×™× ×•×©×™×¨×•×ª×™×</option>
                            <option value="technology">×˜×›× ×•×œ×•×’×™×”</option>
                            <option value="other">××—×¨</option>
                        </select>
                    </div>
                    
                    <div class="business-input-group">
                        <label class="business-input-label">×™×¢×“ ×”×œ×§×•×—×•×ª:</label>
                        <input type="text" class="business-input" id="targetAudience" placeholder="×œ××©×œ: ××©×¤×—×•×ª ×¢× ×™×œ×“×™×, ×‘× ×™ 25-50">
                    </div>
                    
                    <div class="business-input-group">
                        <label class="business-input-label">×”×©×™×¨×•×ª×™× ×©×œ×š:</label>
                        <textarea class="business-input" id="businessServices" rows="3" placeholder="×œ××©×œ: ×›×ª×¨×™×, ×”×©×ª×œ×•×ª, ×™×™×©×•×¨ ×©×™× ×™×™×, × ×™×ª×•×—×™ ×—× ×™×›×™×™×"></textarea>
                    </div>
                    
                    <button class="customize-business-btn" onclick="customizeBusiness()" id="customizeBusinessBtn">
                        <i class="fas fa-magic"></i>
                        ×”×ª×× ××ª×¨ ×œ×¢×¡×§ ×©×œ×™
                    </button>
                </div>

                <!-- Advanced Tools -->
                <div class="panel-section">
                    <div class="section-title">
                        <i class="fas fa-tools"></i>
                        ×›×œ×™× ××ª×§×“××™×
                    </div>
                    
                    <div class="advanced-tools">
                        <div class="advanced-tool" onclick="addSection('hero')">
                            <i class="fas fa-star"></i>
                            <span>×“×£ ×‘×™×ª</span>
                        </div>
                        <div class="advanced-tool" onclick="addSection('services')">
                            <i class="fas fa-cogs"></i>
                            <span>×©×™×¨×•×ª×™×</span>
                        </div>
                        <div class="advanced-tool" onclick="addSection('about')">
                            <i class="fas fa-user"></i>
                            <span>××•×“×•×ª</span>
                        </div>
                        <div class="advanced-tool" onclick="addSection('contact')">
                            <i class="fas fa-envelope"></i>
                            <span>×¦×•×¨ ×§×©×¨</span>
                        </div>
                        <div class="advanced-tool" onclick="addSection('gallery')">
                            <i class="fas fa-images"></i>
                            <span>×’×œ×¨×™×”</span>
                        </div>
                        <div class="advanced-tool" onclick="addSection('testimonials')">
                            <i class="fas fa-quote-left"></i>
                            <span>×”××œ×¦×•×ª</span>
                        </div>
                        <div class="advanced-tool" onclick="generateQR()">
                            <i class="fas fa-qrcode"></i>
                            <span>QR Code</span>
                        </div>
                        <div class="advanced-tool" onclick="exportCode()">
                            <i class="fas fa-code"></i>
                            <span>×™×™×¦× ×§×•×“</span>
                        </div>
                    </div>
                </div>

            </div>

            <!-- Center Panel - Website Preview -->
            <div class="center-panel">
                <div class="preview-toolbar">
                    <div class="preview-info" id="previewInfo">
                        <span id="currentWebsiteName">×œ× × ×‘×—×¨ ××ª×¨</span>
                        <span id="currentWebsitePrice"></span>
                    </div>
                    
                    <div style="display: flex; gap: 0.5rem;">
                        <button class="btn" onclick="refreshPreview()" title="×¨×¢× ×Ÿ ×ª×¦×•×’×”">
                            <i class="fas fa-sync"></i>
                        </button>
                        <button class="btn" onclick="previewInNewWindow()" title="×ª×¦×•×’×” ×‘×—×œ×•×Ÿ ×—×“×©">
                            <i class="fas fa-external-link-alt"></i>
                        </button>
                        <button class="btn" onclick="enableEditMode()" title="××¦×‘ ×¢×¨×™×›×”" id="editModeBtn">
                            <i class="fas fa-edit"></i>
                            ×¢×¨×™×›×”
                        </button>
                        <button class="btn warning" onclick="takeScreenshot()" title="×¦×™×œ×•× ××¡×š">
                            <i class="fas fa-camera"></i>
                        </button>
                    </div>
                </div>
                
                <iframe class="preview-frame desktop" id="previewFrame" src="about:blank"></iframe>
                
                <div class="no-website-overlay" id="noWebsiteOverlay">
                    <div class="overlay-content">
                        <h3><i class="fas fa-rocket"></i> WebMaster Pro Ultimate</h3>
                        <p><strong>××“×™×˜×•×¨ AI ××”×¤×›× ×™ ×¢× ×™×›×•×œ×•×ª ×××™×ª×™×•×ª</strong></p>
                        <p>×‘×—×¨ ××ª×¨ ××”×¨×©×™××” ×œ××¢×œ×” ×›×“×™ ×œ×”×ª×—×™×œ ×œ×¢×¨×•×š ×¢× AI ×××™×ª×™</p>
                        
                        <div class="website-stats">
                            <div class="stat-card">
                                <div class="stat-number">11</div>
                                <div class="stat-label">××ª×¨×™× ××§×¦×•×¢×™×™×</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number">â‚ª26,900</div>
                                <div class="stat-label">×¢×¨×š ×›×•×œ×œ</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number">âˆ</div>
                                <div class="stat-label">AI ×œ×œ× ×”×’×‘×œ×”</div>
                            </div>
                        </div>
                        
                        <button class="btn primary" onclick="loadDemoWebsite()" style="margin-top: 1rem;">
                            <i class="fas fa-play"></i>
                            ×˜×¢×Ÿ ×“××•: ×“"×¨ ××™×›×œ ×¨×•×–×Ÿ
                        </button>
                    </div>
                </div>
            </div>

            <!-- Right Panel - Live Editor -->
            <div class="right-panel" id="rightPanel">
                
                <!-- Live Element Editor -->
                <div class="live-element-editor">
                    <div class="section-title">
                        <i class="fas fa-edit"></i>
                        ×¢×•×¨×š ×—×™
                    </div>
                    
                    <div class="element-editor-content" id="elementEditorContent">
                        <p style="text-align: center; opacity: 0.7; font-size: 0.9rem;">
                            ×œ×—×¥ ×¢×œ ××œ×× ×˜ ×‘××ª×¨ ×›×“×™ ×œ×¢×¨×•×š ××•×ª×•
                        </p>
                    </div>
                </div>

                <!-- Color System -->
                <div class="color-system">
                    <div class="section-title">
                        <i class="fas fa-palette"></i>
                        ××¢×¨×›×ª ×¦×‘×¢×™×
                    </div>
                    
                    <div class="color-palette">
                        <div class="color-swatch" style="background: #3b82f6;" onclick="selectColor('#3b82f6')" data-color="#3b82f6"></div>
                        <div class="color-swatch" style="background: #10b981;" onclick="selectColor('#10b981')" data-color="#10b981"></div>
                        <div class="color-swatch" style="background: #f59e0b;" onclick="selectColor('#f59e0b')" data-color="#f59e0b"></div>
                        <div class="color-swatch" style="background: #ef4444;" onclick="selectColor('#ef4444')" data-color="#ef4444"></div>
                        <div class="color-swatch" style="background: #8b5cf6;" onclick="selectColor('#8b5cf6')" data-color="#8b5cf6"></div>
                        <div class="color-swatch" style="background: #ec4899;" onclick="selectColor('#ec4899')" data-color="#ec4899"></div>
                        <div class="color-swatch" style="background: #06b6d4;" onclick="selectColor('#06b6d4')" data-color="#06b6d4"></div>
                        <div class="color-swatch" style="background: #84cc16;" onclick="selectColor('#84cc16')" data-color="#84cc16"></div>
                    </div>
                    
                    <div class="color-picker-container">
                        <div class="color-preview" id="colorPreview" style="background: #3b82f6;" onclick="openColorPicker()"></div>
                        <input type="color" id="colorPicker" class="color-input" value="#3b82f6" onchange="updateColorPreview(this.value)">
                    </div>
                    
                    <div class="color-actions">
                        <button class="color-action-btn" onclick="applyColorToPrimary()">
                            ×¦×‘×¢ ×¨××©×™
                        </button>
                        <button class="color-action-btn" onclick="applyColorToBackground()">
                            ×¨×§×¢
                        </button>
                        <button class="color-action-btn" onclick="applyColorToText()">
                            ×˜×§×¡×˜
                        </button>
                        <button class="color-action-btn" onclick="applyColorToAccent()">
                            ×”×“×’×©×”
                        </button>
                    </div>
                </div>

                <!-- Website Analytics -->
                <div class="panel-section">
                    <div class="section-title">
                        <i class="fas fa-chart-line"></i>
                        ×× ×œ×™×˜×™×§×ª ×”××ª×¨
                    </div>
                    
                    <div style="font-size: 0.85rem; line-height: 1.6;">
                        <div style="margin-bottom: 0.8rem; display: flex; justify-content: space-between;">
                            <span>××”×™×¨×•×ª ×˜×¢×™× ×”:</span>
                            <span style="color: var(--success); font-weight: 600;">98/100</span>
                        </div>
                        <div style="margin-bottom: 0.8rem; display: flex; justify-content: space-between;">
                            <span>×¦×™×•×Ÿ SEO:</span>
                            <span style="color: var(--success); font-weight: 600;">95/100</span>
                        </div>
                        <div style="margin-bottom: 0.8rem; display: flex; justify-content: space-between;">
                            <span>× ×’×™×©×•×ª:</span>
                            <span style="color: var(--warning); font-weight: 600;">87/100</span>
                        </div>
                        <div style="margin-bottom: 0.8rem; display: flex; justify-content: space-between;">
                            <span>××•×‘×™×™×œ:</span>
                            <span style="color: var(--success); font-weight: 600;">100/100</span>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span>××‘×˜×—×”:</span>
                            <span style="color: var(--success); font-weight: 600;">100/100</span>
                        </div>
                    </div>
                    
                    <button class="btn" onclick="runFullAnalysis()" style="width: 100%; margin-top: 1rem;">
                        <i class="fas fa-search"></i>
                        ×‘×“×™×§×” ××œ××”
                    </button>
                </div>

                <!-- Website Info -->
                <div class="panel-section">
                    <div class="section-title">
                        <i class="fas fa-info-circle"></i>
                        ×¤×¨×˜×™ ×”××ª×¨
                    </div>
                    
                    <div style="font-size: 0.85rem; line-height: 1.6;">
                        <div style="margin-bottom: 0.5rem;">
                            <strong>×©×:</strong> <span id="siteName">×œ× × ×‘×—×¨</span>
                        </div>
                        <div style="margin-bottom: 0.5rem;">
                            <strong>×§×˜×’×•×¨×™×”:</strong> <span id="siteCategory">-</span>
                        </div>
                        <div style="margin-bottom: 0.5rem;">
                            <strong>××—×™×¨:</strong> <span id="sitePrice">-</span>
                        </div>
                        <div style="margin-bottom: 0.5rem;">
                            <strong>××¦×‘:</strong> <span id="siteStatus">××•×›×Ÿ ×œ×¢×¨×™×›×”</span>
                        </div>
                        <div style="margin-bottom: 0.5rem;">
                            <strong>API Status:</strong> <span id="apiConnectionStatus">×œ× ××—×•×‘×¨</span>
                        </div>
                        <div>
                            <strong>× ×¢×¨×š ×œ××—×¨×•× ×”:</strong> <span id="lastModified">-</span>
                        </div>
                    </div>
                </div>

            </div>
        </div>

        <!-- Status Bar -->
        <div class="status-bar">
            <div class="status-left">
                <div class="status-item">
                    <div class="status-indicator" id="statusIndicator"></div>
                    <span id="statusText">××•×›×Ÿ ×œ×¢×‘×•×“×” - WebMaster Pro Ultimate</span>
                </div>
                <div class="status-item">
                    <i class="fas fa-brain"></i>
                    <span>AI Ready</span>
                </div>
                <div class="status-item">
                    <i class="fas fa-cloud"></i>
                    <span>Cloud Save</span>
                </div>
                <div class="status-item">
                    <i class="fas fa-mobile-alt"></i>
                    <span>Responsive</span>
                </div>
                <div class="status-item">
                    <i class="fas fa-rocket"></i>
                    <span>Auto Publish</span>
                </div>
            </div>
            <div>
                ğŸš€ WebMaster Pro Ultimate | 11 ××ª×¨×™× ××§×¦×•×¢×™×™× | â‚ª26,900 | AI ×××™×ª×™ ×œ×œ× ×”×’×‘×œ×”
            </div>
        </div>
    </div>

    <script>
        // ===== GLOBAL VARIABLES =====
        let currentWebsite = '';
        let selectedElement = null;
        let currentDevice = 'desktop';
        let isFullscreen = false;
        let editMode = false;
        let currentAIMode = 'openai';
        let currentImageStyle = 'professional';
        let apiKeys = {};
        let supabaseClient = null;
        let websitesData = {};

        // ===== API CONFIGURATION =====
        function loadAPIKeys() {
            const savedKeys = localStorage.getItem('webmaster_api_keys');
            if (savedKeys) {
                apiKeys = JSON.parse(savedKeys);
                updateAPIStatus();
                return true;
            }
            return false;
        }

        function saveAPIKeys() {
            localStorage.setItem('webmaster_api_keys', JSON.stringify(apiKeys));
        }

        function testAndSaveAPIKeys() {
            const openaiKey = document.getElementById('openaiKey').value;
            const claudeKey = document.getElementById('claudeKey').value;
            const supabaseUrl = document.getElementById('supabaseUrl').value;
            const supabaseKey = document.getElementById('supabaseKey').value;
            const imgbbKey = document.getElementById('imgbbKey').value;

            // Basic validation
            if (!openaiKey && !claudeKey) {
                showAPIStatus('error', '× ×“×¨×© ×œ×¤×—×•×ª OpenAI ××• Claude API key');
                return;
            }

            // Save keys
            apiKeys = {
                openai: openaiKey,
                claude: claudeKey,
                supabaseUrl: supabaseUrl,
                supabaseKey: supabaseKey,
                imgbb: imgbbKey
            };

            saveAPIKeys();
            
            // Test connections
            showAPIStatus('success', 'API Keys × ×©××¨×• ×‘×”×¦×œ×—×”! ×‘×•×“×§ ×—×™×‘×•×¨...');
            
            setTimeout(() => {
                initializeSupabase();
                updateAPIStatus();
                hideAPISetup();
                startEditor();
            }, 1000);
        }

        function skipAPISetup() {
            hideAPISetup();
            startEditor();
            showNotification('× ×™×ª×Ÿ ×œ×”×’×“×™×¨ API Keys ×××•×—×¨ ×™×•×ª×¨ ×“×¨×š ×›×¤×ª×•×¨ API', 'info');
        }

        function openAPISettings() {
            if (apiKeys.openai || apiKeys.claude) {
                // Load existing keys
                document.getElementById('openaiKey').value = apiKeys.openai || '';
                document.getElementById('claudeKey').value = apiKeys.claude || '';
                document.getElementById('supabaseUrl').value = apiKeys.supabaseUrl || '';
                document.getElementById('supabaseKey').value = apiKeys.supabaseKey || '';
                document.getElementById('imgbbKey').value = apiKeys.imgbb || '';
            }
            document.getElementById('apiSetupModal').style.display = 'flex';
        }

        function hideAPISetup() {
            document.getElementById('apiSetupModal').style.display = 'none';
        }

        function showAPIStatus(type, message) {
            const status = document.getElementById('apiStatus');
            status.className = `api-status ${type}`;
            status.textContent = message;
        }

        function updateAPIStatus() {
            const statusElement = document.getElementById('apiConnectionStatus');
            if (apiKeys.openai || apiKeys.claude) {
                statusElement.textContent = '××—×•×‘×¨ âœ“';
                statusElement.style.color = 'var(--success)';
            } else {
                statusElement.textContent = '×œ× ××—×•×‘×¨';
                statusElement.style.color = 'var(--error)';
            }
        }

        // ===== SUPABASE INTEGRATION =====
        function initializeSupabase() {
            if (apiKeys.supabaseUrl && apiKeys.supabaseKey) {
                try {
                    // In a real implementation, you would use the Supabase client library
                    // supabaseClient = createClient(apiKeys.supabaseUrl, apiKeys.supabaseKey);
                    console.log('âœ… Supabase initialized');
                } catch (error) {
                    console.error('âŒ Supabase initialization failed:', error);
                }
            }
        }

        // ===== REAL AI INTEGRATION =====
        async function callOpenAI(prompt, type = 'text') {
            if (!apiKeys.openai) {
                throw new Error('OpenAI API key not configured');
            }

            const url = type === 'image' 
                ? 'https://api.openai.com/v1/images/generations'
                : 'https://api.openai.com/v1/chat/completions';

            const body = type === 'image' 
                ? {
                    model: "dall-e-3",
                    prompt: prompt,
                    n: 1,
                    size: "1024x1024",
                    quality: "standard"
                  }
                : {
                    model: "gpt-4o",
                    messages: [
                        {
                            role: "system",
                            content: `You are a professional web designer and content creator helping to customize websites for businesses. 
                                     Always respond in Hebrew when creating content.
                                     Focus on professional, engaging, and SEO-optimized content.`
                        },
                        {
                            role: "user", 
                            content: prompt
                        }
                    ],
                    max_tokens: 2000,
                    temperature: 0.7
                  };

            try {
                const response = await fetch(url, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${apiKeys.openai}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(body)
                });

                if (!response.ok) {
                    throw new Error(`OpenAI API error: ${response.status}`);
                }

                const data = await response.json();
                
                if (type === 'image') {
                    return data.data[0].url;
                } else {
                    return data.choices[0].message.content;
                }
            } catch (error) {
                console.error('OpenAI API error:', error);
                throw error;
            }
        }

        async function callClaude(prompt) {
            if (!apiKeys.claude) {
                throw new Error('Claude API key not configured');
            }

            try {
                const response = await fetch('https://api.anthropic.com/v1/messages', {
                    method: 'POST',
                    headers: {
                        'x-api-key': apiKeys.claude,
                        'Content-Type': 'application/json',
                        'anthropic-version': '2023-06-01'
                    },
                    body: JSON.stringify({
                        model: "claude-3-sonnet-20240229",
                        max_tokens: 2000,
                        messages: [
                            {
                                role: "user",
                                content: `You are a professional web designer and content creator helping to customize websites for businesses. 
                                         Always respond in Hebrew when creating content.
                                         Focus on professional, engaging, and SEO-optimized content.
                                         
                                         ${prompt}`
                            }
                        ]
                    })
                });

                if (!response.ok) {
                    throw new Error(`Claude API error: ${response.status}`);
                }

                const data = await response.json();
                return data.content[0].text;
            } catch (error) {
                console.error('Claude API error:', error);
                throw error;
            }
        }

        // ===== IMAGE UPLOAD =====
        async function uploadImage(imageBlob) {
            if (!apiKeys.imgbb) {
                console.warn('ImgBB API key not configured, using placeholder');
                return 'https://via.placeholder.com/400x300?text=Generated+Image';
            }

            try {
                const formData = new FormData();
                formData.append('image', imageBlob);

                const response = await fetch(`https://api.imgbb.com/1/upload?key=${apiKeys.imgbb}`, {
                    method: 'POST',
                    body: formData
                });

                if (!response.ok) {
                    throw new Error(`ImgBB API error: ${response.status}`);
                }

                const data = await response.json();
                return data.data.url;
            } catch (error) {
                console.error('Image upload error:', error);
                throw error;
            }
        }

        // ===== INITIALIZATION =====
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸš€ WebMaster Pro Ultimate Loading...');
            
            // Check for saved API keys
            if (loadAPIKeys()) {
                hideAPISetup();
                startEditor();
            } else {
                // Show API setup modal
                document.getElementById('apiSetupModal').style.display = 'flex';
            }
        });

        function startEditor() {
            updateStatus('×××ª×—×œ ××¢×¨×›×ª ××ª×§×“××ª...', 'working');
            
            // Show loading screen
            document.getElementById('loadingScreen').style.display = 'flex';
            
            loadWebsiteOptions();
            setupKeyboardShortcuts();
            initializeSupabase();
            updateAPIStatus();
            
            // Hide loading screen
            setTimeout(() => {
                document.getElementById('loadingScreen').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('loadingScreen').style.display = 'none';
                    document.getElementById('editorContainer').classList.add('loaded');
                    updateStatus('××•×›×Ÿ ×œ×¢×‘×•×“×” - WebMaster Pro Ultimate', 'ready');
                    showNotification('ğŸš€ WebMaster Pro Ultimate ××•×›×Ÿ ×¢× AI ×××™×ª×™!', 'success');
                    console.log('âœ… Ultimate Editor loaded successfully!');
                }, 500);
            }, 3000);
        }

        function loadWebsiteOptions() {
            websitesData = {
                'dr-michal-rosen': {
                    name: '×“"×¨ ××™×›×œ ×¨×•×–×Ÿ',
                    category: '×¨×¤×•××” ××¡×ª×˜×™×ª',
                    price: 2800,
                    description: '×§×œ×™× ×™×§×” ××ª×§×“××ª ×œ×¨×¤×•××” ××¡×ª×˜×™×ª ×¢× ×˜×›× ×•×œ×•×’×™×•×ª ×—×“×™×©×•×ª',
                    html: generateDrMichalRosenHTML()
                },
                'fitness-co': {
                    name: '×“× ×™ ×¤×™×˜ - ××××Ÿ ×›×•×©×¨',
                    category: '××××Ÿ ×›×•×©×¨ ××™×©×™',
                    price: 2200,
                    description: '××××Ÿ ×›×•×©×¨ ××•×¡××š ×¢× ×ª×•×›× ×™×•×ª ××™××•×Ÿ ××•×ª×××•×ª ××™×©×™×ª',
                    html: generateFitnessHTML()
                },
                'yoga-studio': {
                    name: '×¡×˜×•×“×™×• ××•×”×',
                    category: '×™×•×’×” ×•××“×™×˜×¦×™×”',
                    price: 1900,
                    description: '×¡×˜×•×“×™×• ×™×•×’×” ××§×¦×•×¢×™ ×¢× ×©×™×¢×•×¨×™× ××’×•×•× ×™× ×•××“×¨×™×›×™× ××•×¡××›×™×',
                    html: generateYogaHTML()
                },
                'nutritionist': {
                    name: '×“"×¨ ×©×¨×” ×›×”×Ÿ - ×ª×–×•× ××™×ª',
                    category: '×ª×–×•× ×” ×§×œ×™× ×™×ª',
                    price: 2400,
                    description: '×ª×–×•× ××™×ª ×§×œ×™× ×™×ª ××•×¡××›×ª ×¢× ×ª×¤×¨×™×˜×™× ××•×ª×××™× ××™×©×™×ª',
                    html: generateNutritionistHTML()
                },
                'law-firm': {
                    name: '××©×¨×“ ×¢×•"×“ ×‘×¨×§×•×‘×™×¥',
                    category: '×©×™×¨×•×ª×™× ××©×¤×˜×™×™×',
                    price: 2500,
                    description: '××©×¨×“ ×¢×•×¨×›×™ ×“×™×Ÿ ××•×‘×™×œ ×¢× ×”×ª××—×•×ª ×‘×ª×—×•××™× ××’×•×•× ×™×',
                    html: generateLawFirmHTML()
                },
                'accountant': {
                    name: '×¨×™× ×” ×œ×•×™ - ×—×©×‘×ª',
                    category: '×©×™×¨×•×ª×™ ×—×©×‘×•× ××•×ª',
                    price: 2000,
                    description: '×—×©×‘×ª ××•×¡××›×ª ×¢× ×©×™×¨×•×ª×™ ×—×©×‘×•× ××•×ª ×•×©×›×¨ ××§×¦×•×¢×™×™×',
                    html: generateAccountantHTML()
                },
                'beauty-salon': {
                    name: '××¡×¤×¨×” BELLA',
                    category: '×™×•×¤×™ ×•×¢×™×¦×•×‘ ×©×™×¢×¨',
                    price: 1700,
                    description: '×¡×œ×•×Ÿ ×™×•×¤×™ ××•×‘×™×œ ×¢× ×©×™×¨×•×ª×™ ×¢×™×¦×•×‘ ×©×™×¢×¨ ×•×™×•×¤×™ ××ª×§×“××™×',
                    html: generateBeautySalonHTML()
                },
                'tutor': {
                    name: '×“"×¨ ×¨×•× ×™×ª ×œ×•×™ - ××•×¨×” ×¤×¨×˜×™×ª',
                    category: '×—×™× ×•×š ×•×”×•×¨××”',
                    price: 2100,
                    description: '××•×¨×” ×¤×¨×˜×™×ª ××•×¡××›×ª ×œ×‘×’×¨×•×™×•×ª ×¢× ×”×™×©×’×™× ××•×›×—×™×',
                    html: generateTutorHTML()
                },
                'aesthetic-clinic': {
                    name: '×§×œ×™× ×™×§×ª ×™×•×¤×™ ×¤×¨××™×•×',
                    category: '××¡×ª×˜×™×§×” ×¨×¤×•××™×ª',
                    price: 3200,
                    description: '×§×œ×™× ×™×§×ª ×™×•×¤×™ ×™×•×§×¨×ª×™×ª ×¢× ×˜×›× ×•×œ×•×’×™×•×ª ××ª×§×“××•×ª',
                    html: generateAestheticClinicHTML()
                },
                'multibrawn': {
                    name: '××•×œ×˜×™×‘×¨××•×Ÿ',
                    category: '× ×•×¤×© ×•××™×¨×•×¢×™×',
                    price: 2300,
                    description: '××•×œ××™ ××™×¨×•×¢×™× ×™×•×§×¨×ª×™×™× ×œ××¡×™×‘×•×ª ×•×—×ª×•× ×•×ª',
                    html: generateMultibrawnHTML()
                },
                'real-estate': {
                    name: '× ×“×œ"×Ÿ ×¤×¨××™×•×',
                    category: '× ×›×¡×™× ×™×•×§×¨×ª×™×™×',
                    price: 2700,
                    description: '×¡×•×›× ×•×ª × ×“×œ"×Ÿ ×™×•×§×¨×ª×™×ª ×¢× × ×›×¡×™× ××™×›×•×ª×™×™×',
                    html: generateRealEstateHTML()
                }
            };

            const selector = document.getElementById('websiteSelector');
            selector.innerHTML = '<option value="">ğŸ¯ ×‘×—×¨ ××ª×¨ ×œ×¢×¨×™×›×” (11 ××ª×¨×™× ××§×¦×•×¢×™×™× - â‚ª26,900)</option>';
            
            Object.entries(websitesData).forEach(([key, website]) => {
                const option = document.createElement('option');
                option.value = key;
                option.textContent = `${website.name} - ${website.category} (â‚ª${website.price.toLocaleString()})`;
                selector.appendChild(option);
            });
        }

        // ===== AI FUNCTIONALITY =====
        function setAIMode(mode) {
            currentAIMode = mode;
            
            // Update button states
            document.querySelectorAll('.ai-mode').forEach(btn => btn.classList.remove('active'));
            document.getElementById(mode + 'Mode').classList.add('active');
            
            showNotification(`××¢×‘×¨ ×œ××¦×‘ AI: ${mode === 'openai' ? 'OpenAI' : 'Claude'}`, 'info');
        }

        async function executeUltraAI() {
            const input = document.getElementById('aiInput');
            const command = input.value.trim();
            const btn = document.getElementById('aiExecuteBtn');
            
            if (!command) {
                showNotification('×”×›× ×¡ ×”×•×¨××” ×œ-AI', 'warning');
                return;
            }
            
            if (!currentWebsite) {
                showNotification('×‘×—×¨ ××ª×¨ ×œ×¤× ×™ ×©×™××•×© ×‘-AI', 'warning');
                return;
            }

            if (!apiKeys.openai && !apiKeys.claude) {
                showNotification('× ×“×¨×© ×œ×”×’×“×™×¨ API Keys ×ª×—×™×œ×”', 'error');
                openAPISettings();
                return;
            }
            
            // Start AI processing
            btn.disabled = true;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> AI ××¢×‘×“...';
            updateStatus(`${currentAIMode.toUpperCase()} ××¢×‘×“ ×”×•×¨××”...`, 'working');
            
            try {
                let result;
                const website = websitesData[currentWebsite];
                const contextualPrompt = `
××ª×¨ × ×•×›×—×™: ${website.name}
×§×˜×’×•×¨×™×”: ${website.category}
×”×•×¨××”: ${command}

×× × ×‘×¦×¢ ××ª ×”×”×•×¨××” ×‘××•×¤×Ÿ ××§×¦×•×¢×™ ×•××•×ª×× ×œ×¡×•×’ ×”×¢×¡×§.
`;

                if (currentAIMode === 'openai' && apiKeys.openai) {
                    result = await callOpenAI(contextualPrompt);
                } else if (currentAIMode === 'claude' && apiKeys.claude) {
                    result = await callClaude(contextualPrompt);
                } else {
                    throw new Error('AI API ×œ× ×–××™×Ÿ');
                }

                // Apply the AI result to the website
                await applyAIResultToWebsite(result, command);
                
                showNotification('AI ×‘×™×¦×¢ ××ª ×”×”×•×¨××” ×‘×”×¦×œ×—×”!', 'success');
                input.value = '';
                
            } catch (error) {
                console.error('AI Error:', error);
                showNotification('×©×’×™××” ×‘-AI: ' + error.message, 'error');
            }
            
            // Reset button
            btn.disabled = false;
            btn.innerHTML = '<i class="fas fa-magic"></i> ×‘×¦×¢ ×¢× AI ×××™×ª×™';
            updateStatus('AI ×¡×™×™× ×œ×¢×‘×“', 'ready');
        }

        async function quickAI(action) {
            if (!currentWebsite) {
                showNotification('×‘×—×¨ ××ª×¨ ×ª×—×™×œ×”', 'warning');
                return;
            }
            
            const website = websitesData[currentWebsite];
            updateStatus('AI ××‘×¦×¢ ×¤×¢×•×œ×” ××”×™×¨×”...', 'working');
            
            let prompt;
            switch(action) {
                case 'business-content':
                    prompt = `×›×ª×•×‘ ×ª×•×›×Ÿ ×©×™×•×•×§×™ ××§×¦×•×¢×™ ×•××•×©×š ×œ${website.category} ×‘×©× ${website.name}. ×›×œ×•×œ ×›×•×ª×¨×•×ª, ×ª×™××•×¨×™×, ×•×™×ª×¨×•× ×•×ª.`;
                    break;
                case 'design-modern':
                    prompt = `×”×¦×¢ ×©×™×¤×•×¨×™× ×¢×™×¦×•×‘×™×™× ××•×“×¨× ×™×™× ×œ${website.category}. ×›×œ×•×œ ×¦×‘×¢×™×, ×¤×•× ×˜×™×, ×•×¤×¨×™×¡×”.`;
                    break;
                case 'seo-optimize':
                    prompt = `×¦×•×¨ ××•×¤×˜×™××™×–×¦×™×” ××œ××” ×œSEO ×œ${website.category}. ×›×œ×•×œ ××™×œ×•×ª ××¤×ª×—, meta descriptions, ×•×›×•×ª×¨×•×ª H1-H6.`;
                    break;
                case 'mobile-optimize':
                    prompt = `×”×¦×¢ ××•×¤×˜×™××™×–×¦×™×” ××œ××” ×œ××›×©×™×¨×™× × ×™×™×“×™× ×œ${website.category}. ×›×œ×•×œ ×’×“×œ×™ ×›×¤×ª×•×¨×™×, ×ª×¤×¨×™×˜×™×, ×•×—×•×•×™×™×ª ××©×ª××©.`;
                    break;
                case 'add-calculator':
                    prompt = `×¦×•×¨ ××—×©×‘×•×Ÿ ×¢×œ×•×™×•×ª ××™× ×˜×¨××§×˜×™×‘×™ ×œ${website.category}. ×›×œ×•×œ HTML, CSS ×•-JavaScript.`;
                    break;
                case 'contact-forms':
                    prompt = `×¦×•×¨ ×˜×¤×¡×™ ×™×¦×™×¨×ª ×§×©×¨ ××ª×§×“××™× ×œ${website.category} ×¢× ××™× ×˜×’×¨×¦×™×™×ª WhatsApp.`;
                    break;
                default:
                    prompt = `×©×¤×¨ ××ª ×”××ª×¨ ×©×œ ${website.name} ×‘××•×¤×Ÿ ×›×œ×œ×™.`;
            }
            
            try {
                let result;
                if (currentAIMode === 'openai' && apiKeys.openai) {
                    result = await callOpenAI(prompt);
                } else if (currentAIMode === 'claude' && apiKeys.claude) {
                    result = await callClaude(prompt);
                } else {
                    throw new Error('AI API ×œ× ×–××™×Ÿ');
                }

                await applyAIResultToWebsite(result, action);
                showNotification(`×¤×¢×•×œ×” ××”×™×¨×”: ${action} ×‘×•×¦×¢×” ×‘×”×¦×œ×—×”!`, 'success');
                
            } catch (error) {
                console.error('Quick AI Error:', error);
                showNotification('×©×’×™××” ×‘×¤×¢×•×œ×” ××”×™×¨×”: ' + error.message, 'error');
            }
            
            updateStatus('×¤×¢×•×œ×” ×”×•×©×œ××”', 'ready');
        }

        async function applyAIResultToWebsite(result, action) {
            // This function applies the AI result to the actual website
            console.log('ğŸ¤– Applying AI Result:', result);
            
            const iframe = document.getElementById('previewFrame');
            if (!iframe || !iframe.contentDocument) {
                throw new Error('×œ× × ×™×ª×Ÿ ×œ×¢×¨×•×š ××ª ×”××ª×¨ ×›×¨×’×¢');
            }
            
            try {
                // Here you would implement the actual website modification
                // For now, we'll simulate the application
                document.getElementById('lastModified').textContent = new Date().toLocaleString('he-IL');
                
                // If using Supabase, save the changes
                if (supabaseClient) {
                    await saveToSupabase(currentWebsite, result, action);
                }
                
            } catch (error) {
                console.error('Error applying AI result:', error);
                throw error;
            }
        }

        // ===== IMAGE GENERATION =====
        function setImageStyle(style) {
            currentImageStyle = style;
            
            // Update button states
            document.querySelectorAll('.image-style').forEach(btn => btn.classList.remove('active'));
            document.querySelector(`[data-style="${style}"]`).classList.add('active');
        }

        async function generateImage() {
            const input = document.getElementById('imageInput');
            const prompt = input.value.trim();
            const btn = document.getElementById('generateImageBtn');
            
            if (!prompt) {
                showNotification('×ª××¨ ××ª ×”×ª××•× ×” ×©××ª×” ×¨×•×¦×”', 'warning');
                return;
            }

            if (!apiKeys.openai) {
                showNotification('× ×“×¨×© OpenAI API Key ×œ×™×¦×™×¨×ª ×ª××•× ×•×ª', 'error');
                openAPISettings();
                return;
            }
            
            // Start image generation
            btn.disabled = true;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> ×™×•×¦×¨ ×ª××•× ×”...';
            updateStatus('×™×•×¦×¨ ×ª××•× ×” ×¢× DALL-E 3...', 'working');
            
            try {
                const styledPrompt = `${prompt}, ${currentImageStyle} style, high quality, professional photography`;
                
                const imageUrl = await callOpenAI(styledPrompt, 'image');
                
                // Add the generated image to the gallery
                addGeneratedImage(imageUrl);
                
                showNotification('×ª××•× ×” × ×•×¦×¨×” ×‘×”×¦×œ×—×”!', 'success');
                input.value = '';
                
            } catch (error) {
                console.error('Image Generation Error:', error);
                showNotification('×©×’×™××” ×‘×™×¦×™×¨×ª ×ª××•× ×”: ' + error.message, 'error');
            }
            
            // Reset button
            btn.disabled = false;
            btn.innerHTML = '<i class="fas fa-image"></i> ×¦×•×¨ ×ª××•× ×” ×¢× AI';
            updateStatus('×™×¦×™×¨×ª ×ª××•× ×” ×”×•×©×œ××”', 'ready');
        }

        function addGeneratedImage(imageUrl) {
            const container = document.getElementById('generatedImages');
            
            const imageDiv = document.createElement('div');
            imageDiv.className = 'generated-image';
            imageDiv.onclick = () => selectGeneratedImage(imageUrl);
            
            const img = document.createElement('img');
            img.src = imageUrl;
            img.alt = 'Generated Image';
            img.onload = () => {
                imageDiv.appendChild(img);
                container.appendChild(imageDiv);
            };
            img.onerror = () => {
                showNotification('×©×’×™××” ×‘×˜×¢×™× ×ª ×”×ª××•× ×”', 'error');
            };
        }

        function selectGeneratedImage(imageUrl) {
            if (selectedElement && selectedElement.tagName === 'IMG') {
                selectedElement.src = imageUrl;
                showNotification('×”×ª××•× ×” ×”×•×—×œ×¤×” ×‘×”×¦×œ×—×”!', 'success');
                document.getElementById('lastModified').textContent = new Date().toLocaleString('he-IL');
            } else {
                // Copy to clipboard or show usage instructions
                navigator.clipboard.writeText(imageUrl).then(() => {
                    showNotification('URL ×”×ª××•× ×” ×”×•×¢×ª×§ ×œ×œ×•×—. ×‘×—×¨ ×ª××•× ×” ×‘××ª×¨ ×›×“×™ ×œ×”×—×œ×™×£ ××•×ª×”.', 'info');
                });
            }
        }

        // ===== BUSINESS CUSTOMIZATION =====
        async function customizeBusiness() {
            const businessName = document.getElementById('businessName').value.trim();
            const businessCategory = document.getElementById('businessCategory').value;
            const targetAudience = document.getElementById('targetAudience').value.trim();
            const businessServices = document.getElementById('businessServices').value.trim();
            const btn = document.getElementById('customizeBusinessBtn');
            
            if (!businessName || !businessCategory) {
                showNotification('××œ× ××ª ×©× ×”×¢×¡×§ ×•×”×§×˜×’×•×¨×™×”', 'warning');
                return;
            }

            if (!currentWebsite) {
                showNotification('×‘×—×¨ ××ª×¨ ×ª×—×™×œ×”', 'warning');
                return;
            }

            if (!apiKeys.openai && !apiKeys.claude) {
                showNotification('× ×“×¨×© ×œ×”×’×“×™×¨ API Keys ×ª×—×™×œ×”', 'error');
                openAPISettings();
                return;
            }
            
            // Start business customization
            btn.disabled = true;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> ××ª××...';
            updateStatus('××ª×× ××ª×¨ ×œ×¢×¡×§...', 'working');
            
            try {
                const customizationPrompt = `
×”×ª×× ××ª ×”××ª×¨ ×”×‘× ×œ×¢×¡×§ ×”×¡×¤×¦×™×¤×™:

×©× ×”×¢×¡×§: ${businessName}
×ª×—×•×: ${businessCategory}
×§×”×œ ×™×¢×“: ${targetAudience || '×œ× ×¦×•×™×Ÿ'}
×©×™×¨×•×ª×™×: ${businessServices || '×œ× ×¦×•×™×Ÿ'}

×× × ×¦×•×¨:
1. ×›×•×ª×¨×ª ×¨××©×™×ª ××•×©×›×ª
2. ×ª×™××•×¨ ×”×¢×¡×§ (2-3 ××©×¤×˜×™×)
3. ×¨×©×™××ª ×©×™×¨×•×ª×™× ×¢×™×§×¨×™×™× (3-5 ×©×™×¨×•×ª×™×)
4. ×§×¨×™××” ×œ×¤×¢×•×œ×” ××•×ª×××ª
5. ×˜×§×¡×˜ ××•×“×•×ª ×§×¦×¨
6. ×¤×¨×˜×™ ×§×©×¨ (×”×©××¨ ×›××§×•× ×œ×¦×™×•×Ÿ)

×›×ª×•×‘ ×”×›×œ ×‘×¢×‘×¨×™×ª, ×‘××¡×œ×•×‘ ××§×¦×•×¢×™ ×•××•×©×š.
`;

                let result;
                if (currentAIMode === 'openai' && apiKeys.openai) {
                    result = await callOpenAI(customizationPrompt);
                } else if (currentAIMode === 'claude' && apiKeys.claude) {
                    result = await callClaude(customizationPrompt);
                }

                // Apply customization to website
                await applyBusinessCustomization(result, {
                    name: businessName,
                    category: businessCategory,
                    audience: targetAudience,
                    services: businessServices
                });
                
                showNotification('×”××ª×¨ ×”×•×ª×× ×œ×¢×¡×§ ×©×œ×š ×‘×”×¦×œ×—×”!', 'success');
                
                // Clear form
                document.getElementById('businessName').value = '';
                document.getElementById('businessCategory').value = '';
                document.getElementById('targetAudience').value = '';
                document.getElementById('businessServices').value = '';
                
            } catch (error) {
                console.error('Business Customization Error:', error);
                showNotification('×©×’×™××” ×‘×”×ª×××”: ' + error.message, 'error');
            }
            
            // Reset button
            btn.disabled = false;
            btn.innerHTML = '<i class="fas fa-magic"></i> ×”×ª×× ××ª×¨ ×œ×¢×¡×§ ×©×œ×™';
            updateStatus('×”×ª×××” ×”×•×©×œ××”', 'ready');
        }

        async function applyBusinessCustomization(aiResult, businessData) {
            // Apply the AI-generated business customization to the website
            console.log('ğŸ¢ Applying Business Customization:', aiResult);
            
            const iframe = document.getElementById('previewFrame');
            if (!iframe || !iframe.contentDocument) {
                throw new Error('×œ× × ×™×ª×Ÿ ×œ×¢×¨×•×š ××ª ×”××ª×¨ ×›×¨×’×¢');
            }
            
            try {
                const doc = iframe.contentDocument;
                
                // Update business name in title and headers
                const titleElements = doc.querySelectorAll('h1, .hero-title, .main-title');
                titleElements.forEach(el => {
                    if (el.textContent.includes('×“"×¨') || el.textContent.includes('××¨×¤××”')) {
                        el.textContent = businessData.name;
                    }
                });
                
                // Update meta title
                const title = doc.querySelector('title');
                if (title) {
                    title.textContent = `${businessData.name} - ${businessData.category}`;
                }
                
                document.getElementById('lastModified').textContent = new Date().toLocaleString('he-IL');
                
                // Save to Supabase if available
                if (supabaseClient) {
                    await saveToSupabase(currentWebsite, aiResult, 'business_customization');
                }
                
            } catch (error) {
                console.error('Error applying business customization:', error);
                throw error;
            }
        }

        // ===== WEBSITE LOADING =====
        function loadWebsite(websiteKey) {
            if (!websiteKey || !websitesData[websiteKey]) {
                showNoWebsiteOverlay();
                clearWebsiteInfo();
                return;
            }

            const website = websitesData[websiteKey];
            currentWebsite = websiteKey;
            
            hideNoWebsiteOverlay();
            updateStatus(`×˜×•×¢×Ÿ ${website.name}...`, 'working');
            
            // Update UI
            updateWebsiteInfo(website);
            
            // Load the full website HTML
            const iframe = document.getElementById('previewFrame');
            iframe.srcdoc = website.html;
            
            // Update preview info
            document.getElementById('currentWebsiteName').textContent = website.name;
            document.getElementById('currentWebsitePrice').textContent = `â‚ª${website.price.toLocaleString()}`;
            
            setTimeout(() => {
                updateStatus(`${website.name} × ×˜×¢×Ÿ ×‘×”×¦×œ×—×” - ××•×›×Ÿ ×œ×¢×¨×™×›×”`, 'ready');
                showNotification(`××ª×¨ ${website.name} × ×˜×¢×Ÿ ×‘××œ×•××• ×•××•×›×Ÿ ×œ×¢×¨×™×›×” ××ª×§×“××ª`, 'success');
                document.getElementById('lastModified').textContent = new Date().toLocaleString('he-IL');
                
                // Enable edit mode automatically
                enableEditMode();
                
                // Setup iframe communication
                setupIframeMessaging();
            }, 1500);
            
            console.log(`ğŸ¯ Loaded website: ${website.name} (â‚ª${website.price.toLocaleString()})`);
        }

        function loadDemoWebsite() {
            const demoKey = 'dr-michal-rosen';
            document.getElementById('websiteSelector').value = demoKey;
            loadWebsite(demoKey);
        }

        function setupIframeMessaging() {
            const iframe = document.getElementById('previewFrame');
            if (iframe && iframe.contentWindow) {
                // Add event listeners for editing
                iframe.onload = () => {
                    if (editMode) {
                        enableIframeEditing();
                    }
                };
            }
        }

        // ===== EDIT MODE =====
        function enableEditMode() {
            if (!currentWebsite) {
                showNotification('×‘×—×¨ ××ª×¨ ×ª×—×™×œ×”', 'warning');
                return;
            }
            
            editMode = !editMode;
            const btn = document.getElementById('editModeBtn');
            
            if (editMode) {
                btn.innerHTML = '<i class="fas fa-eye"></i> ×ª×¦×•×’×”';
                btn.classList.add('primary');
                showNotification('××¦×‘ ×¢×¨×™×›×” ×¤×¢×™×œ - ×œ×—×¥ ×¢×œ ××œ×× ×˜×™× ×œ×¢×¨×™×›×”', 'info');
                enableIframeEditing();
            } else {
                btn.innerHTML = '<i class="fas fa-edit"></i> ×¢×¨×™×›×”';
                btn.classList.remove('primary');
                showNotification('××¦×‘ ×ª×¦×•×’×” ×¤×¢×™×œ', 'info');
                disableIframeEditing();
            }
        }

        function enableIframeEditing() {
            const iframe = document.getElementById('previewFrame');
            if (iframe && iframe.contentDocument) {
                const doc = iframe.contentDocument;
                
                // Add editing attributes to all editable elements
                const editableElements = doc.querySelectorAll('h1, h2, h3, h4, h5, h6, p, span, div, img, button, a');
                editableElements.forEach(element => {
                    element.style.cursor = 'pointer';
                    element.addEventListener('click', handleElementClick);
                    element.addEventListener('mouseover', handleElementHover);
                    element.addEventListener('mouseout', handleElementMouseOut);
                });
            }
        }

        function disableIframeEditing() {
            const iframe = document.getElementById('previewFrame');
            if (iframe && iframe.contentDocument) {
                const doc = iframe.contentDocument;
                
                // Remove editing attributes
                const elements = doc.querySelectorAll('[data-editable]');
                elements.forEach(element => {
                    element.style.cursor = '';
                    element.style.outline = '';
                    element.removeEventListener('click', handleElementClick);
                    element.removeEventListener('mouseover', handleElementHover);
                    element.removeEventListener('mouseout', handleElementMouseOut);
                });
            }
        }

        function handleElementClick(event) {
            if (!editMode) return;
            
            event.preventDefault();
            event.stopPropagation();
            
            selectedElement = event.target;
            highlightElement(selectedElement);
            showElementEditor(selectedElement);
        }

        function handleElementHover(event) {
            if (!editMode || event.target === selectedElement) return;
            
            event.target.style.outline = '2px dashed #00ffff';
        }

        function handleElementMouseOut(event) {
            if (!editMode || event.target === selectedElement) return;
            
            event.target.style.outline = '';
        }

        function highlightElement(element) {
            // Remove previous highlights
            const iframe = document.getElementById('previewFrame');
            if (iframe && iframe.contentDocument) {
                const highlighted = iframe.contentDocument.querySelectorAll('[data-highlighted]');
                highlighted.forEach(el => {
                    el.style.outline = '';
                    el.removeAttribute('data-highlighted');
                });
            }
            
            // Highlight selected element
            element.style.outline = '3px solid #00ffff';
            element.setAttribute('data-highlighted', 'true');
        }

        function showElementEditor(element) {
            const editorContent = document.getElementById('elementEditorContent');
            const elementType = element.tagName.toLowerCase();
            
            let editorHTML = '';
            
            if (['h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'p', 'span', 'div', 'button', 'a'].includes(elementType)) {
                // Text editing
                editorHTML = `
                    <div class="editor-field">
                        <label class="editor-label">×˜×§×¡×˜:</label>
                        <textarea class="editor-input" id="elementTextEditor" rows="3">${element.textContent}</textarea>
                    </div>
                    <div class="editor-field">
                        <label class="editor-label">×’×•×“×œ ×¤×•× ×˜:</label>
                        <select class="editor-input" id="elementFontSize">
                            <option value="12px">12px</option>
                            <option value="14px">14px</option>
                            <option value="16px">16px</option>
                            <option value="18px">18px</option>
                            <option value="20px">20px</option>
                            <option value="24px">24px</option>
                            <option value="32px">32px</option>
                            <option value="48px">48px</option>
                        </select>
                    </div>
                    <div class="editor-field">
                        <label class="editor-label">×¦×‘×¢ ×˜×§×¡×˜:</label>
                        <input type="color" class="editor-input" id="elementTextColor" value="${getComputedStyle(element).color}">
                    </div>
                    <div class="editor-buttons">
                        <button class="editor-btn" onclick="applyElementChanges()">
                            <i class="fas fa-save"></i> ×”×—×œ
                        </button>
                        <button class="editor-btn danger" onclick="clearElementEditor()">
                            <i class="fas fa-times"></i> ×‘×˜×œ
                        </button>
                    </div>
                `;
            } else if (elementType === 'img') {
                // Image editing
                editorHTML = `
                    <div class="editor-field">
                        <label class="editor-label">URL ×ª××•× ×”:</label>
                        <input type="text" class="editor-input" id="elementImageSrc" value="${element.src}">
                    </div>
                    <div class="editor-field">
                        <label class="editor-label">×˜×§×¡×˜ ×—×œ×•×¤×™:</label>
                        <input type="text" class="editor-input" id="elementImageAlt" value="${element.alt}">
                    </div>
                    <div class="editor-field">
                        <label class="editor-label">×¨×•×—×‘:</label>
                        <input type="text" class="editor-input" id="elementImageWidth" value="${element.style.width || 'auto'}">
                    </div>
                    <div class="editor-buttons">
                        <button class="editor-btn" onclick="applyElementChanges()
