<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üöÄ WebMaster Pro - ◊ê◊ì◊ô◊ò◊ï◊® ◊û◊™◊ï◊ß◊ü</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --bg-primary: #0f0f23;
            --bg-secondary: #1e1e3f;
            --text-primary: #ffffff;
            --text-secondary: #b8b8d4;
            --accent-neon: #00ffff;
            --accent-purple: #8b5cf6;
            --success: #10b981;
            --warning: #f59e0b;
            --error: #ef4444;
            --glass-bg: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
            --gradient-primary: linear-gradient(135deg, var(--accent-neon) 0%, var(--accent-purple) 100%);
            --gradient-bg: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Heebo', sans-serif;
            background: var(--gradient-bg);
            color: var(--text-primary);
            min-height: 100vh;
        }

        /* API Setup Modal */
        .api-setup-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            backdrop-filter: blur(10px);
        }

        .api-setup-content {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 3rem;
            max-width: 600px;
            width: 90%;
            text-align: center;
        }

        .api-setup-title {
            font-size: 2rem;
            font-weight: 800;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 1rem;
        }

        .api-setup-description {
            font-size: 1.1rem;
            opacity: 0.9;
            margin-bottom: 2rem;
            line-height: 1.6;
        }

        .api-input-group {
            margin-bottom: 1.5rem;
            text-align: right;
        }

        .api-input-label {
            display: block;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--accent-neon);
        }

        .api-input {
            width: 100%;
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 10px;
            padding: 1rem;
            color: var(--text-primary);
            font-size: 0.9rem;
            direction: ltr;
        }

        .api-input:focus {
            outline: none;
            border-color: var(--accent-neon);
            box-shadow: 0 0 20px rgba(0,255,255,0.3);
        }

        .api-btn {
            background: var(--gradient-primary);
            border: none;
            border-radius: 12px;
            padding: 1rem 2rem;
            color: var(--bg-primary);
            font-weight: 700;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 0.5rem;
        }

        .api-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 20px 40px rgba(0,255,255,0.4);
        }

        .api-btn.secondary {
            background: var(--glass-bg);
            color: var(--text-primary);
            border: 1px solid var(--glass-border);
        }

        .api-status {
            margin-top: 1rem;
            padding: 0.8rem;
            border-radius: 10px;
            font-size: 0.9rem;
            display: none;
        }

        .api-status.success {
            background: rgba(16,185,129,0.2);
            border: 1px solid var(--success);
            color: var(--success);
            display: block;
        }

        .api-status.error {
            background: rgba(239,68,68,0.2);
            border: 1px solid var(--error);
            color: var(--error);
            display: block;
        }

        /* Main Layout */
        .editor-container {
            display: grid;
            grid-template-rows: 70px 1fr 50px;
            height: 100vh;
        }

        .editor-header {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--glass-border);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 1rem;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 800;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .website-selector {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 10px;
            padding: 0.5rem 1rem;
            color: var(--text-primary);
            font-size: 0.9rem;
            min-width: 350px;
            cursor: pointer;
        }

        .btn {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 8px;
            padding: 0.5rem 1rem;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            text-decoration: none;
        }

        .btn:hover {
            background: var(--accent-neon);
            color: var(--bg-primary);
            transform: translateY(-2px);
        }

        .btn.primary {
            background: var(--gradient-primary);
            color: var(--bg-primary);
            font-weight: 600;
        }

        .btn.success {
            background: var(--success);
            color: white;
        }

        /* Main Content */
        .main-content {
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 2rem;
        }

        .welcome-content {
            max-width: 800px;
        }

        .welcome-title {
            font-size: 3rem;
            font-weight: 900;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 1rem;
        }

        .welcome-subtitle {
            font-size: 1.3rem;
            opacity: 0.9;
            margin-bottom: 2rem;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .feature-card {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 15px;
            padding: 2rem;
            text-align: center;
            transition: all 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0,255,255,0.2);
        }

        .feature-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .feature-title {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: var(--accent-neon);
        }

        .feature-description {
            opacity: 0.8;
            line-height: 1.6;
        }

        .ai-demo {
            background: linear-gradient(135deg, rgba(0,255,255,0.1) 0%, rgba(139,92,246,0.1) 100%);
            border: 2px solid rgba(0,255,255,0.3);
            border-radius: 15px;
            padding: 2rem;
            margin: 2rem 0;
        }

        .ai-input {
            width: 100%;
            background: rgba(255,255,255,0.1);
            border: 1px solid var(--glass-border);
            border-radius: 10px;
            padding: 1rem;
            color: var(--text-primary);
            margin-bottom: 1rem;
            min-height: 100px;
            resize: vertical;
            font-family: inherit;
        }

        .ai-execute-btn {
            background: var(--gradient-primary);
            border: none;
            border-radius: 12px;
            padding: 1rem 2rem;
            color: var(--bg-primary);
            font-weight: 700;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .ai-execute-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 20px 40px rgba(0,255,255,0.4);
        }

        .ai-execute-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .ai-result {
            margin-top: 1rem;
            padding: 1rem;
            background: rgba(16,185,129,0.1);
            border: 1px solid var(--success);
            border-radius: 10px;
            display: none;
        }

        /* Status Bar */
        .status-bar {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border-top: 1px solid var(--glass-border);
            padding: 0.7rem 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.8rem;
        }

        .status-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--success);
            margin-left: 0.5rem;
            animation: pulse 2s infinite;
        }

        .status-indicator.working {
            background: var(--warning);
            animation: fastPulse 0.5s infinite;
        }

        .status-indicator.error {
            background: var(--error);
            animation: none;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        @keyframes fastPulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        /* Notifications */
        .notification {
            position: fixed;
            top: 80px;
            right: 20px;
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            color: var(--text-primary);
            padding: 1rem 1.5rem;
            border-radius: 12px;
            border: 1px solid var(--glass-border);
            z-index: 10000;
            animation: slideInRight 0.3s ease-out;
            max-width: 400px;
            min-width: 300px;
        }

        .notification.success {
            border-left: 4px solid var(--success);
        }

        .notification.error {
            border-left: 4px solid var(--error);
        }

        .notification.warning {
            border-left: 4px solid var(--warning);
        }

        .notification.info {
            border-left: 4px solid var(--accent-neon);
        }

        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @media (max-width: 768px) {
            .welcome-title {
                font-size: 2rem;
            }
            
            .features-grid {
                grid-template-columns: 1fr;
            }
            
            .website-selector {
                min-width: 200px;
                font-size: 0.8rem;
            }
        }
    </style>
</head>
<body>
    <!-- API Setup Modal -->
    <div class="api-setup-modal" id="apiSetupModal">
        <div class="api-setup-content">
            <h2 class="api-setup-title">üîë ◊î◊í◊ì◊®◊™ API Keys</h2>
            <p class="api-setup-description">
                ◊î◊õ◊†◊° ◊ê◊™ ◊î-API Keys ◊©◊ú◊ö ◊õ◊ì◊ô ◊ú◊î◊§◊¢◊ô◊ú ◊ê◊™ ◊î◊ô◊õ◊ï◊ú◊ï◊™ ◊î◊û◊™◊ß◊ì◊û◊ï◊™.<br>
                <strong>◊î◊û◊ô◊ì◊¢ ◊†◊©◊û◊® ◊û◊ß◊ï◊û◊ô◊™ ◊ê◊¶◊ú◊ö ◊ë◊ì◊§◊ì◊§◊ü ◊ë◊ú◊ë◊ì!</strong>
            </p>
            
            <div class="api-input-group">
                <label class="api-input-label">OpenAI API Key (◊ó◊ï◊ë◊î):</label>
                <input type="password" class="api-input" id="openaiKey" placeholder="sk-proj-..." />
            </div>
            
            <div class="api-input-group">
                <label class="api-input-label">Claude API Key (◊ê◊ï◊§◊¶◊ô◊ï◊†◊ú◊ô):</label>
                <input type="password" class="api-input" id="claudeKey" placeholder="sk-ant-..." />
            </div>
            
            <div class="api-status" id="apiStatus"></div>
            
            <div>
                <button class="api-btn" onclick="testAndSaveAPIKeys()">
                    <i class="fas fa-check"></i>
                    ◊ë◊ì◊ï◊ß ◊ï◊©◊û◊ï◊®
                </button>
                <button class="api-btn secondary" onclick="skipAPISetup()">
                    ◊ì◊ú◊í ◊ú◊¢◊™ ◊¢◊™◊î
                </button>
            </div>
        </div>
    </div>

    <!-- Main Editor -->
    <div class="editor-container" id="editorContainer">
        
        <!-- Header -->
        <div class="editor-header">
            <div class="logo">
                <i class="fas fa-rocket"></i>
                WebMaster Pro
            </div>
            
            <select class="website-selector" id="websiteSelector" onchange="loadWebsite(this.value)">
                <option value="">üéØ ◊ë◊ó◊® ◊ê◊™◊® ◊ú◊¢◊®◊ô◊õ◊î</option>
                <option value="demo1">◊ì"◊® ◊û◊ô◊õ◊ú ◊®◊ï◊ñ◊ü - ◊®◊§◊ï◊ê◊î ◊ê◊°◊™◊ò◊ô◊™ (‚Ç™2,800)</option>
                <option value="demo2">◊ì◊†◊ô ◊§◊ô◊ò - ◊û◊ê◊û◊ü ◊õ◊ï◊©◊® (‚Ç™2,200)</option>
                <option value="demo3">◊°◊ò◊ï◊ì◊ô◊ï ◊ê◊ï◊î◊ù - ◊ô◊ï◊í◊î (‚Ç™1,900)</option>
            </select>
            
            <div style="display: flex; gap: 0.5rem;">
                <button class="btn" onclick="openAPISettings()" title="◊î◊í◊ì◊®◊ï◊™ API">
                    <i class="fas fa-key"></i>
                    API Keys
                </button>
                <button class="btn success" onclick="testAI()" title="◊ë◊ì◊ô◊ß◊™ AI">
                    <i class="fas fa-robot"></i>
                    ◊ë◊ì◊ï◊ß AI
                </button>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <div class="welcome-content">
                <h1 class="welcome-title">üöÄ WebMaster Pro</h1>
                <p class="welcome-subtitle">◊ê◊ì◊ô◊ò◊ï◊® ◊ï◊ô◊ñ◊ï◊ê◊ú◊ô ◊û◊™◊ß◊ì◊ù ◊¢◊ù AI ◊ê◊û◊ô◊™◊ô</p>
                
                <div class="features-grid">
                    <div class="feature-card">
                        <div class="feature-icon">ü§ñ</div>
                        <h3 class="feature-title">AI ◊û◊™◊ß◊ì◊ù</h3>
                        <p class="feature-description">◊ô◊¶◊ô◊®◊™ ◊™◊ï◊õ◊ü ◊ï◊¢◊ô◊¶◊ï◊ë ◊ê◊ï◊ò◊ï◊û◊ò◊ô ◊¢◊ù OpenAI ◊ï-Claude</p>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">üé®</div>
                        <h3 class="feature-title">◊¢◊®◊ô◊õ◊î ◊ó◊ô◊î</h3>
                        <p class="feature-description">◊¢◊®◊ô◊õ◊™ ◊ê◊™◊®◊ô◊ù ◊ë◊ñ◊û◊ü ◊ê◊û◊™ ◊¢◊ù ◊õ◊ú◊ô◊ù ◊û◊ß◊¶◊ï◊¢◊ô◊ô◊ù</p>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">üíæ</div>
                        <h3 class="feature-title">◊©◊û◊ô◊®◊î ◊ë◊¢◊†◊ü</h3>
                        <p class="feature-description">◊°◊†◊õ◊®◊ï◊ü ◊ê◊ï◊ò◊ï◊û◊ò◊ô ◊¢◊ù Supabase ◊ï◊©◊û◊ô◊®◊î ◊û◊ê◊ï◊ë◊ò◊ó◊™</p>
                    </div>
                </div>

                <!-- AI Demo -->
                <div class="ai-demo">
                    <h3 style="margin-bottom: 1rem; color: var(--accent-neon);">üß™ ◊ë◊ì◊ô◊ß◊™ AI</h3>
                    <textarea 
                        class="ai-input" 
                        id="aiDemoInput" 
                        placeholder="◊†◊°◊î ◊ê◊™ ◊î-AI: ◊õ◊™◊ï◊ë '◊¶◊ï◊® ◊õ◊ï◊™◊®◊™ ◊ú◊û◊®◊§◊ê◊™ ◊©◊ô◊†◊ô◊ô◊ù' ◊ï◊ú◊ó◊• ◊¢◊ú ◊î◊õ◊§◊™◊ï◊®"
                    ></textarea>
                    <button class="ai-execute-btn" onclick="testAI()" id="aiDemoBtn">
                        <i class="fas fa-magic"></i>
                        ◊ë◊ì◊ï◊ß AI ◊¢◊õ◊©◊ô◊ï
                    </button>
                    <div class="ai-result" id="aiDemoResult"></div>
                </div>
            </div>
        </div>

        <!-- Status Bar -->
        <div class="status-bar">
            <div style="display: flex; align-items: center;">
                <span id="statusText">◊û◊ï◊õ◊ü ◊ú◊¢◊ë◊ï◊ì◊î</span>
                <div class="status-indicator" id="statusIndicator"></div>
            </div>
            <div id="apiConnectionStatus">
                API: ◊ú◊ê ◊û◊ó◊ï◊ë◊®
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let apiKeys = {};
        let isAPIConnected = false;

        // Load saved API keys
        function loadAPIKeys() {
            try {
                const savedKeys = localStorage.getItem('webmaster_api_keys');
                if (savedKeys) {
                    apiKeys = JSON.parse(savedKeys);
                    updateAPIStatus();
                    return true;
                }
            } catch (error) {
                console.error('Error loading API keys:', error);
            }
            return false;
        }

        // Save API keys
        function saveAPIKeys() {
            try {
                localStorage.setItem('webmaster_api_keys', JSON.stringify(apiKeys));
                console.log('‚úÖ API Keys saved successfully');
            } catch (error) {
                console.error('‚ùå Error saving API keys:', error);
            }
        }

        // Test and save API keys
        async function testAndSaveAPIKeys() {
            console.log('üîÑ Testing API keys...');
            
            const openaiKey = document.getElementById('openaiKey').value.trim();
            const claudeKey = document.getElementById('claudeKey').value.trim();

            // Basic validation
            if (!openaiKey && !claudeKey) {
                showAPIStatus('error', '◊†◊ì◊®◊© ◊ú◊§◊ó◊ï◊™ OpenAI ◊ê◊ï Claude API key');
                return;
            }

            if (openaiKey && !openaiKey.startsWith('sk-')) {
                showAPIStatus('error', 'OpenAI API key ◊ó◊ô◊ô◊ë ◊ú◊î◊™◊ó◊ô◊ú ◊ë-sk-');
                return;
            }

            if (claudeKey && !claudeKey.startsWith('sk-ant-')) {
                showAPIStatus('error', 'Claude API key ◊ó◊ô◊ô◊ë ◊ú◊î◊™◊ó◊ô◊ú ◊ë-sk-ant-');
                return;
            }

            // Save keys
            apiKeys = {
                openai: openaiKey,
                claude: claudeKey,
                timestamp: new Date().toISOString()
            };

            saveAPIKeys();
            
            showAPIStatus('success', 'API Keys ◊†◊©◊û◊®◊ï ◊ë◊î◊¶◊ú◊ó◊î! ◊ë◊ï◊ì◊ß ◊ó◊ô◊ë◊ï◊®...');
            
            // Test connection
            let testResults = [];
            
            if (openaiKey) {
                try {
                    const result = await testOpenAIConnection(openaiKey);
                    testResults.push(result);
                } catch (error) {
                    testResults.push({ service: 'OpenAI', success: false, error: error.message });
                }
            }

            if (claudeKey) {
                try {
                    const result = await testClaudeConnection(claudeKey);
                    testResults.push(result);
                } catch (error) {
                    testResults.push({ service: 'Claude', success: false, error: error.message });
                }
            }

            // Show results
            const successCount = testResults.filter(r => r.success).length;
            if (successCount > 0) {
                isAPIConnected = true;
                updateAPIStatus();
                hideAPISetup();
                showNotification(`‚úÖ ${successCount} API(s) ◊û◊ó◊ï◊ë◊®◊ô◊ù ◊ë◊î◊¶◊ú◊ó◊î!`, 'success');
            } else {
                showAPIStatus('error', '◊©◊í◊ô◊ê◊î ◊ë◊ó◊ô◊ë◊ï◊® ◊ú-APIs. ◊ë◊ì◊ï◊ß ◊ê◊™ ◊î◊û◊§◊™◊ó◊ï◊™ ◊ï◊î◊ó◊ô◊ë◊ï◊® ◊ú◊ê◊ô◊†◊ò◊®◊†◊ò.');
            }
        }

        // Test OpenAI connection
        async function testOpenAIConnection(apiKey) {
            console.log('üîÑ Testing OpenAI connection...');
            
            try {
                const response = await fetch('https://api.openai.com/v1/models', {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${apiKey}`,
                        'Content-Type': 'application/json'
                    }
                });

                if (response.ok) {
                    console.log('‚úÖ OpenAI connection successful');
                    return { service: 'OpenAI', success: true };
                } else {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
            } catch (error) {
                console.error('‚ùå OpenAI connection failed:', error);
                throw error;
            }
        }

        // Test Claude connection
        async function testClaudeConnection(apiKey) {
            console.log('üîÑ Testing Claude connection...');
            
            try {
                const response = await fetch('https://api.anthropic.com/v1/messages', {
                    method: 'POST',
                    headers: {
                        'x-api-key': apiKey,
                        'Content-Type': 'application/json',
                        'anthropic-version': '2023-06-01'
                    },
                    body: JSON.stringify({
                        model: "claude-3-haiku-20240307",
                        max_tokens: 10,
                        messages: [
                            {
                                role: "user",
                                content: "Test"
                            }
                        ]
                    })
                });

                if (response.ok || response.status === 400) { // 400 is also OK for connection test
                    console.log('‚úÖ Claude connection successful');
                    return { service: 'Claude', success: true };
                } else {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
            } catch (error) {
                console.error('‚ùå Claude connection failed:', error);
                throw error;
            }
        }

        // Call OpenAI API
        async function callOpenAI(prompt) {
            if (!apiKeys.openai) {
                throw new Error('OpenAI API key not configured');
            }

            try {
                const response = await fetch('https://api.openai.com/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${apiKeys.openai}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        model: "gpt-4o-mini",
                        messages: [
                            {
                                role: "system",
                                content: "You are a professional web designer and content creator. Always respond in Hebrew when creating content for Hebrew websites."
                            },
                            {
                                role: "user", 
                                content: prompt
                            }
                        ],
                        max_tokens: 500,
                        temperature: 0.7
                    })
                });

                if (!response.ok) {
                    throw new Error(`OpenAI API error: ${response.status} ${response.statusText}`);
                }

                const data = await response.json();
                return data.choices[0].message.content;
            } catch (error) {
                console.error('OpenAI API error:', error);
                throw error;
            }
        }

        // Test AI functionality
        async function testAI() {
            console.log('ü§ñ Testing AI functionality...');
            
            if (!isAPIConnected) {
                showNotification('‚ùå ◊ú◊ê ◊û◊ó◊ï◊ë◊® ◊ú-API. ◊î◊í◊ì◊® API Keys ◊™◊ó◊ô◊ú◊î.', 'error');
                openAPISettings();
                return;
            }

            const input = document.getElementById('aiDemoInput');
            const btn = document.getElementById('aiDemoBtn');
            const result = document.getElementById('aiDemoResult');
            
            let prompt = input.value.trim();
            if (!prompt) {
                prompt = '◊¶◊ï◊® ◊õ◊ï◊™◊®◊™ ◊û◊ï◊©◊õ◊™ ◊ú◊û◊®◊§◊ê◊™ ◊©◊ô◊†◊ô◊ô◊ù ◊û◊ï◊ì◊®◊†◊ô◊™';
                input.value = prompt;
            }

            // Update UI
            btn.disabled = true;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> AI ◊¢◊ï◊ë◊ì...';
            updateStatus('AI ◊û◊¢◊ë◊ì...', 'working');
            
            try {
                const response = await callOpenAI(prompt);
                
                // Show result
                result.innerHTML = `<strong>◊™◊©◊ï◊ë◊™ AI:</strong><br>${response}`;
                result.style.display = 'block';
                
                showNotification('‚úÖ AI ◊¢◊ï◊ë◊ì ◊û◊¢◊ï◊ú◊î!', 'success');
                updateStatus('AI ◊ñ◊û◊ô◊ü ◊ï◊§◊¢◊ô◊ú', 'ready');
                
            } catch (error) {
                console.error('AI Test Error:', error);
                result.innerHTML = `<strong>◊©◊í◊ô◊ê◊î:</strong> ${error.message}`;
                result.style.display = 'block';
                result.style.borderColor = 'var(--error)';
                result.style.backgroundColor = 'rgba(239,68,68,0.1)';
                
                showNotification('‚ùå ◊©◊í◊ô◊ê◊î ◊ë-AI: ' + error.message, 'error');
                updateStatus('◊©◊í◊ô◊ê◊î ◊ë-AI', 'error');
            }
            
            // Reset button
            btn.disabled = false;
            btn.innerHTML = '<i class="fas fa-magic"></i> ◊ë◊ì◊ï◊ß AI ◊¢◊õ◊©◊ô◊ï';
        }

        // Skip API setup
        function skipAPISetup() {
            hideAPISetup();
            showNotification('◊†◊ô◊™◊ü ◊ú◊î◊í◊ì◊ô◊® API Keys ◊û◊ê◊ï◊ó◊® ◊ô◊ï◊™◊® ◊ì◊®◊ö ◊õ◊§◊™◊ï◊® "API Keys"', 'info');
        }

        // Open API settings
        function openAPISettings() {
            if (apiKeys.openai || apiKeys.claude) {
                document.getElementById('openaiKey').value = apiKeys.openai || '';
                document.getElementById('claudeKey').value = apiKeys.claude || '';
            }
            document.getElementById('apiSetupModal').style.display = 'flex';
        }

        // Hide API setup
        function hideAPISetup() {
            document.getElementById('apiSetupModal').style.display = 'none';
        }

        // Show API status
        function showAPIStatus(type, message) {
            const status = document.getElementById('apiStatus');
            status.className = `api-status ${type}`;
            status.textContent = message;
        }

        // Update API status
        function updateAPIStatus() {
            const statusElement = document.getElementById('apiConnectionStatus');
            if (apiKeys.openai || apiKeys.claude) {
                statusElement.textContent = 'API: ◊û◊ó◊ï◊ë◊® ‚úì';
                statusElement.style.color = 'var(--success)';
                isAPIConnected = true;
            } else {
                statusElement.textContent = 'API: ◊ú◊ê ◊û◊ó◊ï◊ë◊®';
                statusElement.style.color = 'var(--error)';
                isAPIConnected = false;
            }
        }

        // Update status
        function updateStatus(message, type) {
            document.getElementById('statusText').textContent = message;
            const indicator = document.getElementById('statusIndicator');
            
            indicator.className = 'status-indicator';
            if (type === 'working') {
                indicator.classList.add('working');
            } else if (type === 'error') {
                indicator.classList.add('error');
            }
        }

        // Show notification
        function showNotification(message, type = 'info') {
            console.log(`üì¢ ${type.toUpperCase()}: ${message}`);
            
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.innerHTML = `<i class="fas fa-${type === 'success' ? 'check' : type === 'error' ? 'times' : type === 'warning' ? 'exclamation-triangle' : 'info'}"></i> ${message}`;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideInRight 0.3s ease-out reverse';
                setTimeout(() => notification.remove(), 300);
            }, 4000);
        }

        // Load website (placeholder)
        function loadWebsite(websiteKey) {
            if (!websiteKey) return;
            
            showNotification(`◊ò◊ï◊¢◊ü ◊ê◊™◊®: ${websiteKey}`, 'info');
            updateStatus('◊ò◊ï◊¢◊ü ◊ê◊™◊®...', 'working');
            
            setTimeout(() => {
                updateStatus('◊ê◊™◊® ◊†◊ò◊¢◊ü ◊ë◊î◊¶◊ú◊ó◊î', 'ready');
                showNotification('◊ê◊™◊® ◊û◊ï◊õ◊ü ◊ú◊¢◊®◊ô◊õ◊î', 'success');
            }, 1000);
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ WebMaster Pro Editor Loading...');
            
            // Load saved API keys
            if (loadAPIKeys()) {
                hideAPISetup();
                updateStatus('◊û◊ï◊õ◊ü ◊ú◊¢◊ë◊ï◊ì◊î', 'ready');
                showNotification('üöÄ WebMaster Pro ◊û◊ï◊õ◊ü ◊ú◊¢◊ë◊ï◊ì◊î!', 'success');
            } else {
                // Show API setup modal
                document.getElementById('apiSetupModal').style.display = 'flex';
            }
            
            console.log('‚úÖ Editor initialized successfully');
        });

        // Debug function
        function debugAPI() {
            console.log('üîç Debug Info:');
            console.log('API Keys:', Object.keys(apiKeys));
            console.log('Is Connected:', isAPIConnected);
            console.log('LocalStorage:', localStorage.getItem('webmaster_api_keys'));
        }

        // Make debug available globally
        window.debugAPI = debugAPI;
        
        console.log('üöÄ WebMaster Pro Editor Loaded Successfully!');
        console.log('üí° Type debugAPI() in console for troubleshooting');
    </script>
</body>
</html>
