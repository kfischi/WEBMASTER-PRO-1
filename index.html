<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🚀 WebMaster Pro Ultimate - גלריה ואדיטור משודרג</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <!-- PayPal SDK -->
    <script src="https://www.paypal.com/sdk/js?client-id=AUrJbG-lg3RAJ7l6tbEdESRWWSGK5Jq3PhDLkVVIMHWVnAWpY6or3HP9f_Xc6WytxqSOUNnz12COxkss&currency=USD"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #0f0f0f 0%, #1a1a1a 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* רקע אנימציה מתקדם */
        .animated-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: linear-gradient(135deg, #0f0f0f 0%, #1a1a1a 30%, #2d1b69 70%, #11998e 100%);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
        }

        .floating-particles {
            position: absolute;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        .particle {
            position: absolute;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            animation: float 6s ease-in-out infinite;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); opacity: 0.7; }
            50% { transform: translateY(-20px) rotate(180deg); opacity: 1; }
        }

        /* כותרת ראשית */
        .hero-section {
            text-align: center;
            padding: 60px 20px;
            position: relative;
            z-index: 2;
        }

        .hero-title {
            font-size: clamp(2.5rem, 5vw, 4rem);
            font-weight: 800;
            background: linear-gradient(135deg, #ffffff, #00d4ff, #ff6b6b);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 20px;
            text-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }

        .hero-subtitle {
            font-size: clamp(1.1rem, 2.5vw, 1.4rem);
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 40px;
            font-weight: 400;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            max-width: 800px;
            margin: 0 auto 40px;
        }

        .stat-card {
            background: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 25px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            background: rgba(0, 0, 0, 0.5);
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 800;
            color: #ffffff;
            margin-bottom: 5px;
        }

        .stat-label {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.9rem;
        }

        /* בקרי פילטרים */
        .filters-section {
            max-width: 1200px;
            margin: 0 auto 40px;
            padding: 0 20px;
        }

        .filters-container {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            margin-bottom: 30px;
        }

        .filter-btn {
            background: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.9);
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .filter-btn:hover,
        .filter-btn.active {
            background: rgba(0, 0, 0, 0.6);
            border-color: rgba(0, 212, 255, 0.6);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 212, 255, 0.2);
        }

        /* גלריית אתרים */
        .gallery-section {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px 60px;
        }

        .websites-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }

        .website-card {
            background: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: pointer;
            position: relative;
            opacity: 0;
            transform: translateY(30px);
            animation: cardAppear 0.6s ease forwards;
        }

        @keyframes cardAppear {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .website-card:hover {
            transform: translateY(-10px) rotateX(5deg);
            box-shadow: 0 20px 40px rgba(0, 212, 255, 0.2);
            background: rgba(0, 0, 0, 0.6);
            border-color: rgba(0, 212, 255, 0.3);
        }

        .card-image-container {
            position: relative;
            height: 220px;
            overflow: hidden;
        }

        .card-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.4s ease;
            opacity: 0;
        }

        .card-image.loaded {
            opacity: 1;
        }

        .website-card:hover .card-image {
            transform: scale(1.1);
        }

        .card-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.8), rgba(45, 27, 105, 0.8));
            opacity: 0;
            transition: opacity 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
        }

        .website-card:hover .card-overlay {
            opacity: 1;
        }

        .card-content {
            padding: 25px;
        }

        .card-category {
            background: linear-gradient(135deg, #2d1b69, #11998e);
            color: white;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            display: inline-block;
            margin-bottom: 15px;
        }

        .card-title {
            font-size: 1.4rem;
            font-weight: 700;
            color: #ffffff;
            margin-bottom: 10px;
            line-height: 1.3;
        }

        .card-description {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.9rem;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .card-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .card-price {
            font-size: 1.5rem;
            font-weight: 800;
            color: #ffffff;
        }

        .card-actions {
            display: flex;
            gap: 10px;
        }

        .btn-preview, .btn-buy {
            padding: 10px 16px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.85rem;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }

        .btn-preview {
            background: rgba(0, 0, 0, 0.3);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .btn-preview:hover {
            background: rgba(0, 0, 0, 0.5);
            transform: translateY(-2px);
            border-color: rgba(0, 212, 255, 0.4);
        }

        .btn-buy {
            background: linear-gradient(135deg, #00d4ff, #ff6b6b);
            color: white;
        }

        .btn-buy:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 212, 255, 0.4);
        }

        /* מודל רכישה */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.8);
            backdrop-filter: blur(5px);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .modal.show {
            opacity: 1;
        }

        .modal-content {
            background: linear-gradient(135deg, rgba(0,0,0,0.8), rgba(0,0,0,0.9));
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255,255,255,0.1);
            margin: 2% auto;
            padding: 0;
            border-radius: 24px;
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            transform: scale(0.8) translateY(50px);
            transition: transform 0.3s ease;
        }

        .modal.show .modal-content {
            transform: scale(1) translateY(0);
        }

        .modal-header {
            padding: 30px;
            border-bottom: 1px solid rgba(255,255,255,0.05);
            position: relative;
        }

        .close {
            position: absolute;
            top: 20px;
            left: 20px;
            color: rgba(255,255,255,0.7);
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .close:hover {
            color: #ffffff;
        }

        .modal-website-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 16px;
            margin-bottom: 20px;
        }

        .modal-website-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: #ffffff;
            margin-bottom: 10px;
        }

        .modal-website-category {
            background: linear-gradient(135deg, #2d1b69, #11998e);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            display: inline-block;
            margin-bottom: 15px;
        }

        .modal-website-description {
            color: rgba(255,255,255,0.8);
            font-size: 1rem;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .modal-website-price {
            font-size: 2rem;
            font-weight: 800;
            color: #ffffff;
            margin-bottom: 20px;
        }

        .modal-body {
            padding: 30px;
        }

        .form-section {
            margin-bottom: 30px;
        }

        .section-title {
            color: #ffffff;
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            color: rgba(255,255,255,0.9);
            font-weight: 600;
            margin-bottom: 8px;
        }

        .form-input, .form-textarea {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid rgba(255,255,255,0.1);
            border-radius: 12px;
            background: rgba(0, 0, 0, 0.3);
            color: #ffffff;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .form-input:focus, .form-textarea:focus {
            outline: none;
            border-color: rgba(0, 212, 255, 0.6);
            background: rgba(0, 0, 0, 0.5);
        }

        .form-input::placeholder, .form-textarea::placeholder {
            color: rgba(255,255,255,0.5);
        }

        .addons-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
        }

        .addon-item {
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 15px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .addon-item:hover {
            background: rgba(0, 0, 0, 0.5);
            border-color: rgba(255, 255, 255, 0.1);
        }

        .addon-item.selected {
            background: rgba(0, 212, 255, 0.1);
            border-color: rgba(0, 212, 255, 0.4);
        }

        .addon-checkbox {
            display: flex;
            align-items: flex-start;
            gap: 12px;
        }

        .addon-checkbox input[type="checkbox"] {
            margin-top: 2px;
            transform: scale(1.2);
        }

        .addon-details h4 {
            color: #ffffff;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .addon-details p {
            color: rgba(255,255,255,0.7);
            font-size: 0.9rem;
            line-height: 1.4;
        }

        .addon-price {
            color: #00d4ff;
            font-weight: 700;
            font-size: 1.1rem;
        }

        .pricing-summary {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 16px;
            padding: 20px;
            margin-top: 20px;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .pricing-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            color: rgba(255,255,255,0.8);
        }

        .pricing-row.total {
            border-top: 1px solid rgba(255,255,255,0.2);
            padding-top: 15px;
            margin-top: 15px;
            font-size: 1.2rem;
            font-weight: 700;
            color: #ffffff;
        }

        .discount-badge {
            background: linear-gradient(135deg, #00d4ff, #ff6b6b);
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-right: 10px;
        }

        .purchase-actions {
            margin-top: 30px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .btn-whatsapp, .btn-email {
            background: linear-gradient(135deg, #25D366, #20B954);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .btn-email {
            background: linear-gradient(135deg, #2d1b69, #11998e);
        }

        .btn-whatsapp:hover, .btn-email:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .payment-divider {
            display: flex;
            align-items: center;
            text-align: center;
            margin: 10px 0;
        }

        .payment-divider::before,
        .payment-divider::after {
            content: '';
            flex: 1;
            height: 1px;
            background: rgba(255,255,255,0.2);
        }

        .payment-divider span {
            padding: 0 20px;
            color: rgba(255,255,255,0.7);
            font-size: 14px;
        }

        .paypal-container {
            margin: 5px 0;
        }

        #paypal-button-container {
            border-radius: 12px;
            overflow: hidden;
        }

        /* רספונסיבי */
        @media (max-width: 768px) {
            .hero-title {
                font-size: 2.5rem;
            }

            .websites-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .filters-container {
                gap: 10px;
            }

            .filter-btn {
                padding: 10px 16px;
                font-size: 0.8rem;
            }

            .modal-content {
                width: 95%;
                margin: 5% auto;
            }

            .modal-header,
            .modal-body {
                padding: 20px;
            }

            .card-actions {
                flex-direction: column;
                gap: 8px;
            }

            .btn-preview, .btn-buy {
                width: 100%;
                justify-content: center;
            }
        }

        /* הסתרת אלמנטים מסוננים */
        .website-card.hidden {
            display: none;
        }

        /* אנימציית טעינת תמונות */
        .image-loading {
            background: linear-gradient(90deg, rgba(255,255,255,0.1) 25%, rgba(255,255,255,0.2) 50%, rgba(255,255,255,0.1) 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
        }

        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }
    </style>
</head>
<body>
    <!-- רקע אנימציה -->
    <div class="animated-background">
        <div class="floating-particles" id="particles"></div>
    </div>

    <!-- כותרת ראשית -->
    <header class="hero-section">
        <h1 class="hero-title">🚀 WebMaster Pro Ultimate</h1>
        <p class="hero-subtitle">פלטפורמה מתקדמת לבניית אתרים עסקיים ברמה עולמית</p>
        
        <!-- סטטיסטיקות -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-number">11</div>
                <div class="stat-label">אתרים מוכנים</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">₪26,900</div>
                <div class="stat-label">שווי כולל</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">100%</div>
                <div class="stat-label">רספונסיבי</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">24/7</div>
                <div class="stat-label">תמיכה</div>
            </div>
        </div>
    </header>

    <!-- בקרי פילטרים -->
    <section class="filters-section">
        <div class="filters-container">
            <button class="filter-btn active" onclick="filterWebsites('all')">
                <i class="fas fa-th"></i> הכל
            </button>
            <button class="filter-btn" onclick="filterWebsites('medical')">
                <i class="fas fa-heartbeat"></i> רפואה
            </button>
            <button class="filter-btn" onclick="filterWebsites('business')">
                <i class="fas fa-briefcase"></i> עסקים
            </button>
            <button class="filter-btn" onclick="filterWebsites('lifestyle')">
                <i class="fas fa-spa"></i> לייפסטייל
            </button>
            <button class="filter-btn" onclick="filterWebsites('premium')">
                <i class="fas fa-crown"></i> פרמיום
            </button>
        </div>
    </section>

    <!-- גלריית אתרים -->
    <section class="gallery-section">
        <div class="websites-grid" id="websitesGrid">
            <!-- האתרים ייווצרו כאן דינמית -->
        </div>
    </section>

    <!-- מודל רכישה -->
    <div id="purchaseModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <span class="close" onclick="closePurchaseModal()">&times;</span>
                <img id="modalWebsiteImage" class="modal-website-image" src="" alt="">
                <h2 id="modalWebsiteTitle" class="modal-website-title"></h2>
                <span id="modalWebsiteCategory" class="modal-website-category"></span>
                <p id="modalWebsiteDescription" class="modal-website-description"></p>
                <div id="modalWebsitePrice" class="modal-website-price"></div>
            </div>
            
            <div class="modal-body">
                <!-- פרטי לקוח -->
                <div class="form-section">
                    <h3 class="section-title">
                        <i class="fas fa-user"></i>
                        פרטי יצירת קשר
                    </h3>
                    
                    <div class="form-group">
                        <label class="form-label">שם מלא *</label>
                        <input type="text" id="customerName" class="form-input" placeholder="הכנס את שמך המלא" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">טלפון *</label>
                        <input type="tel" id="customerPhone" class="form-input" placeholder="050-1234567" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">אימייל *</label>
                        <input type="email" id="customerEmail" class="form-input" placeholder="your@email.com" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">שם העסק</label>
                        <input type="text" id="businessName" class="form-input" placeholder="שם העסק שלך">
                    </div>
                </div>

                <!-- תוספות -->
                <div class="form-section">
                    <h3 class="section-title">
                        <i class="fas fa-plus-circle"></i>
                        תוספות מומלצות
                    </h3>
                    
                    <div class="addons-grid">
                        <div class="addon-item" onclick="toggleAddon(this, 'hosting')">
                            <label class="addon-checkbox">
                                <input type="checkbox" id="hosting" value="180">
                                <div class="addon-details">
                                    <h4>☁️ אחסון שנתי <span class="addon-price">+₪180</span></h4>
                                    <p>אחסון מהיר ויציב לשנה שלמה, כולל גיבויים אוטומטיים ו-SSL</p>
                                </div>
                            </label>
                        </div>
                        
                        <div class="addon-item" onclick="toggleAddon(this, 'domain')">
                            <label class="addon-checkbox">
                                <input type="checkbox" id="domain" value="65">
                                <div class="addon-details">
                                    <h4>🌐 דומיין .co.il <span class="addon-price">+₪65</span></h4>
                                    <p>דומיין ישראלי מקצועי לשנה, כולל הגדרה וחיבור לאתר</p>
                                </div>
                            </label>
                        </div>
                        
                        <div class="addon-item" onclick="toggleAddon(this, 'maintenance')">
                            <label class="addon-checkbox">
                                <input type="checkbox" id="maintenance" value="300">
                                <div class="addon-details">
                                    <h4>🔧 תחזוקה שנתית <span class="addon-price">+₪300</span></h4>
                                    <p>תמיכה טכנית, עדכונים ותיקונים לשנה שלמה</p>
                                </div>
                            </label>
                        </div>
                        
                        <div class="addon-item" onclick="toggleAddon(this, 'seo')">
                            <label class="addon-checkbox">
                                <input type="checkbox" id="seo" value="250">
                                <div class="addon-details">
                                    <h4>🔍 קידום SEO <span class="addon-price">+₪250</span></h4>
                                    <p>אופטימיזציה למנועי חיפוש, מטא תגים ואינדוקס בגוגל</p>
                                </div>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- בקשות מיוחדות -->
                <div class="form-section">
                    <h3 class="section-title">
                        <i class="fas fa-comments"></i>
                        בקשות מיוחדות
                    </h3>
                    
                    <div class="form-group">
                        <label class="form-label">הערות נוספות</label>
                        <textarea id="specialRequests" class="form-textarea" rows="3" placeholder="ספר לנו על העיצוב, הצבעים או הפונקציות שאתה רוצה..."></textarea>
                    </div>
                </div>

                <!-- סיכום מחירים -->
                <div class="pricing-summary">
                    <div class="pricing-row">
                        <span>סכום ביניים:</span>
                        <span id="subtotalAmount">₪0</span>
                    </div>
                    <div class="pricing-row">
                        <span>
                            <span class="discount-badge">השקה</span>
                            הנחה (10%):
                        </span>
                        <span id="discountAmount">₪0</span>
                    </div>
                    <div class="pricing-row total">
                        <span>סה"כ לתשלום:</span>
                        <span id="totalAmount">₪0</span>
                    </div>
                </div>

                <!-- כפתורי רכישה -->
                <div class="purchase-actions">
                    <button onclick="sendWhatsAppOrder()" class="btn-whatsapp">
                        <i class="fab fa-whatsapp"></i>
                        שלח הזמנה בוואטסאפ
                    </button>
                    
                    <div class="payment-divider">
                        <span>או</span>
                    </div>
                    
                    <div id="paypal-button-container" class="paypal-container">
                        <!-- PayPal Buttons will be rendered here -->
                    </div>
                    
                    <button onclick="sendEmailOrder()" class="btn-email">
                        <i class="fas fa-envelope"></i>
                        שלח באימייל
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // החלף עם הפרטים שלך
        const whatsappNumber = '972526359513'; // כפיר
        const emailAddress = 'kfir.biz@gmail.com';
        
        // PayPal Configuration
        const PAYPAL_CLIENT_ID = 'AUrJbG-lg3RAJ7l6tbEdESRWWSGK5Jq3PhDLkVVIMHWVnAWpY6or3HP9f_Xc6WytxqSOUNnz12COxkss';

        // נתוני האתרים
        const websites = [
            {
                id: 'dr-michal-rosen',
                title: 'ד"ר מיכל רוזן',
                category: 'רפואה אסתטית',
                description: 'קליניקה מובילה לרפואה אסתטית ועיצוב פנים מתקדם',
                price: 2800,
                image: 'https://images.unsplash.com/photo-1559757148-5c350d0d3c56?w=800&h=400&fit=crop',
                url: './websites/dr-michal-rosen.html',
                tags: ['medical', 'premium']
            },
            {
                id: 'fitness-co',
                title: 'דני פיט',
                category: 'מאמן אישי',
                description: 'מאמן כושר מקצועי עם מתודות אימון מתקדמות',
                price: 2200,
                image: 'https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=800&h=400&fit=crop',
                url: './websites/fitness-co.html',
                tags: ['lifestyle', 'business']
            },
            {
                id: 'yoga-studio',
                title: 'סטודיו אוהם',
                category: 'יוגה ומדיטציה',
                description: 'מרכז יוגה ומדיטציה ברוח המזרח הרחוק',
                price: 1900,
                image: 'https://images.unsplash.com/photo-1544367567-0f2fcb009e0b?w=800&h=400&fit=crop',
                url: './websites/yoga-studio.html',
                tags: ['lifestyle']
            },
            {
                id: 'nutritionist',
                title: 'ד"ר שרה כהן',
                category: 'תזונאית קלינית',
                description: 'תזונה קלינית מבוססת מדע עם תוכניות אישיות',
                price: 2400,
                image: 'https://images.unsplash.com/photo-1490645935967-10de6ba17061?w=800&h=400&fit=crop',
                url: './websites/nutritionist.html',
                tags: ['medical', 'lifestyle']
            },
            {
                id: 'law-firm',
                title: 'משרד ברקוביץ',
                category: 'עורכי דין',
                description: 'משרד עורכי דין מקצועי עם התמחות באזרחי ומסחרי',
                price: 2500,
                image: 'https://images.unsplash.com/photo-1589829545856-d10d557cf95f?w=800&h=400&fit=crop',
                url: './websites/law-firm.html',
                tags: ['business']
            },
            {
                id: 'accountant',
                title: 'רינה לוי',
                category: 'חשבת שכר',
                description: 'שירותי חשבות שכר מקצועיים לעסקים קטנים ובינוניים',
                price: 2000,
                image: 'https://images.unsplash.com/photo-1554224155-6726b3ff858f?w=800&h=400&fit=crop',
                url: './websites/accountant.html',
                tags: ['business']
            },
            {
                id: 'beauty-salon',
                title: 'מספרה BELLA',
                category: 'יופי ועיצוב שיער',
                description: 'מספרה מודרנית עם שירותי יופי מקצועיים',
                price: 1700,
                image: 'https://images.unsplash.com/photo-1560066984-138dadb4c035?w=800&h=400&fit=crop',
                url: './websites/beauty-salon.html',
                tags: ['lifestyle']
            },
            {
                id: 'tutor',
                title: 'ד"ר רונית לוי',
                category: 'מורה פרטית',
                description: 'הוראה פרטית במתמטיקה ומדעים ברמה אקדמית',
                price: 2100,
                image: 'https://images.unsplash.com/photo-1513475382585-d06e58bcb0e0?w=800&h=400&fit=crop',
                url: './websites/tutor.html',
                tags: ['business']
            },
            {
                id: 'aesthetic-clinic',
                title: 'קליניקת יופי פרמיום',
                category: 'אסתטיקה רפואית',
                description: 'קליניקה יוקרתית לאסתטיקה רפואית ועיצוב פנים',
                price: 3200,
                image: 'https://images.unsplash.com/photo-1519494026892-80bbd2d6fd0d?w=800&h=400&fit=crop',
                url: './websites/aesthetic-clinic.html',
                tags: ['medical', 'premium']
            },
            {
                id: 'multibrawn',
                title: 'מולטיבראון',
                category: 'נופש ואירועים',
                description: 'אירוח ונופש יוקרתי במלונות בוטיק ברחבי הארץ',
                price: 2300,
                image: 'https://images.unsplash.com/photo-1566073771259-6a8506099945?w=800&h=400&fit=crop',
                url: './websites/multibrawn.html',
                tags: ['lifestyle', 'premium']
            },
            {
                id: 'real-estate',
                title: 'נדל"ן פרמיום',
                category: 'השקעות נדל"ן',
                description: 'השקעות נדל"ן יוקרתיות ויעוץ בשוק הנדל"ן',
                price: 2700,
                image: 'https://images.unsplash.com/photo-1560518883-ce09059eeffa?w=800&h=400&fit=crop',
                url: './websites/real-estate.html',
                tags: ['business', 'premium']
            }
        ];

        // יצירת חלקיקים עפים
        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            const particleCount = 50;

            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                
                const size = Math.random() * 4 + 2;
                particle.style.width = size + 'px';
                particle.style.height = size + 'px';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 6 + 's';
                particle.style.animationDuration = (Math.random() * 3 + 3) + 's';
                
                particlesContainer.appendChild(particle);
            }
        }

        // יצירת כרטיסי אתרים
        function createWebsiteCards() {
            const grid = document.getElementById('websitesGrid');
            grid.innerHTML = '';

            websites.forEach((website, index) => {
                const card = document.createElement('div');
                card.className = 'website-card';
                card.dataset.category = website.tags.join(' ');
                card.style.animationDelay = (index * 0.1) + 's';

                card.innerHTML = `
                    <div class="card-image-container">
                        <img class="card-image image-loading" src="${website.image}" alt="${website.title}" loading="lazy">
                        <div class="card-overlay">
                            <span>לחץ לתצוגה מקדימה</span>
                        </div>
                    </div>
                    <div class="card-content">
                        <span class="card-category">${website.category}</span>
                        <h3 class="card-title">${website.title}</h3>
                        <p class="card-description">${website.description}</p>
                        <div class="card-footer">
                            <div class="card-price">₪${website.price.toLocaleString()}</div>
                            <div class="card-actions">
                                <a href="${website.url}" target="_blank" class="btn-preview">
                                    <i class="fas fa-eye"></i>
                                    תצוגה מקדימה
                                </a>
                                <button class="btn-buy" onclick="openPurchaseModal('${website.id}')">
                                    <i class="fas fa-shopping-cart"></i>
                                    קנה עכשיו
                                </button>
                            </div>
                        </div>
                    </div>
                `;

                grid.appendChild(card);
            });
        }

        // פילטור אתרים
        function filterWebsites(category) {
            const cards = document.querySelectorAll('.website-card');
            const buttons = document.querySelectorAll('.filter-btn');

            // עדכון כפתורים
            buttons.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            // פילטור כרטיסים
            cards.forEach(card => {
                if (category === 'all' || card.dataset.category.includes(category)) {
                    card.classList.remove('hidden');
                } else {
                    card.classList.add('hidden');
                }
            });
        }

        // פתיחת מודל רכישה
        function openPurchaseModal(website) {
            const modal = document.getElementById('purchaseModal');
            const websiteData = websites.find(w => w.id === website);
            
            // עדכון פרטי האתר במודל
            document.getElementById('modalWebsiteImage').src = websiteData.image;
            document.getElementById('modalWebsiteTitle').textContent = websiteData.title;
            document.getElementById('modalWebsiteCategory').textContent = websiteData.category;
            document.getElementById('modalWebsiteDescription').textContent = websiteData.description;
            document.getElementById('modalWebsitePrice').textContent = `₪${websiteData.price.toLocaleString()}`;
            
            // שמירת נתוני האתר הנוכחי
            window.currentWebsite = websiteData;
            
            // חישוב מחיר ראשוני
            calculateTotal();
            
            // יצירת כפתורי PayPal
            renderPayPalButtons();
            
            // הצגת המודל
            modal.style.display = 'block';
            setTimeout(() => modal.classList.add('show'), 10);
        }

        // סגירת מודל רכישה
        function closePurchaseModal() {
            const modal = document.getElementById('purchaseModal');
            modal.classList.remove('show');
            setTimeout(() => modal.style.display = 'none', 300);
        }

        // החלפת תוספת
        function toggleAddon(element, addonId) {
            const checkbox = document.getElementById(addonId);
            checkbox.checked = !checkbox.checked;
            
            if (checkbox.checked) {
                element.classList.add('selected');
            } else {
                element.classList.remove('selected');
            }
            
            calculateTotal();
        }

        // חישוב מחיר כולל עם הנחת השקה
        function calculateTotal() {
            const basePrice = window.currentWebsite.price;
            const hostingCost = document.getElementById('hosting').checked ? 180 : 0;
            const domainCost = document.getElementById('domain').checked ? 65 : 0;
            const maintenanceCost = document.getElementById('maintenance').checked ? 300 : 0;
            const seoCost = document.getElementById('seo').checked ? 250 : 0;
            
            const subtotal = basePrice + hostingCost + domainCost + maintenanceCost + seoCost;
            const discount = subtotal * 0.10; // 10% הנחת השקה
            const total = subtotal - discount;
            
            // עדכון תצוגה
            document.getElementById('subtotalAmount').textContent = `₪${subtotal.toLocaleString()}`;
            document.getElementById('discountAmount').textContent = `₪${discount.toLocaleString()}`;
            document.getElementById('totalAmount').textContent = `₪${total.toLocaleString()}`;
            
            // שמירת המחיר לשימוש ב-PayPal
            window.currentTotal = total;
            
            // עדכון כפתורי PayPal עם המחיר החדש
            renderPayPalButtons();
        }

        // יצירת כפתורי PayPal
        function renderPayPalButtons() {
            const container = document.getElementById('paypal-button-container');
            
            // ניקוי כפתורים קיימים
            container.innerHTML = '';
            
            // בדיקה שPayPal SDK נטען
            if (typeof paypal === 'undefined') {
                console.warn('PayPal SDK לא נטען עדיין');
                return;
            }
            
            // המחיר בדולרים (המרה משוערת)
            const priceInUSD = (window.currentTotal / 3.7).toFixed(2);
            
            paypal.Buttons({
                style: {
                    layout: 'vertical',
                    color: 'blue',
                    shape: 'rect',
                    label: 'paypal',
                    height: 45
                },
                
                createOrder: function(data, actions) {
                    const orderData = getOrderData();
                    
                    return actions.order.create({
                        purchase_units: [{
                            amount: {
                                value: priceInUSD,
                                currency_code: 'USD'
                            },
                            description: `${window.currentWebsite.title} - ${window.currentWebsite.category}`,
                            custom_id: `WMP-${Date.now()}`,
                            invoice_id: `INV-${Date.now()}`
                        }]
                    });
                },
                
                onApprove: function(data, actions) {
                    return actions.order.capture().then(function(details) {
                        handlePayPalSuccess(details);
                    });
                },
                
                onError: function(err) {
                    console.error('PayPal Error:', err);
                    alert('אירעה שגיאה בתשלום. אנא נסה שנית או צור קשר דרך WhatsApp.');
                },
                
                onCancel: function(data) {
                    console.log('PayPal payment cancelled:', data);
                }
                
            }).render('#paypal-button-container');
        }

        // טיפול בהצלחת תשלום PayPal
        function handlePayPalSuccess(details) {
            const orderData = getOrderData();
            
            // שליחת הודעת הצלחה ללקוח
            alert(`🎉 התשלום בוצע בהצלחה!\n\nמספר עסקה: ${details.id}\nסכום: $${details.purchase_units[0].amount.value}\n\nנתחיל לעבוד על האתר שלך מיד!`);
            
            // שליחת הודעה אוטומטית בWhatsApp עם פרטי התשלום
            sendPayPalNotification(details, orderData);
            
            // סגירת המודל
            closePurchaseModal();
        }

        // שליחת הודעת תשלום PayPal בWhatsApp
        function sendPayPalNotification(paypalDetails, orderData) {
            const message = `🎉 *תשלום PayPal בוצע בהצלחה!*

*פרטי התשלום:*
💳 מספר עסקה: ${paypalDetails.id}
💰 סכום: $${paypalDetails.purchase_units[0].amount.value}
📧 משלם: ${paypalDetails.payer.email_address}

*פרטי ההזמנה:*
🌐 *אתר נבחר:* ${window.currentWebsite.title}
📂 *קטגוריה:* ${window.currentWebsite.category}

*פרטי לקוח:*
👤 שם: ${orderData.customerName}
📱 טלפון: ${orderData.customerPhone}
📧 אימייל: ${orderData.customerEmail}
🏢 עסק: ${orderData.businessName}

*תוספות נבחרות:*
${orderData.addons}

*בקשות מיוחדות:*
${orderData.specialRequests || 'אין'}

---
✅ *התשלום אושר ומוכן להתחלת עבודה!*
📅 תאריך: ${new Date().toLocaleDateString('he-IL')}
⏰ שעה: ${new Date().toLocaleTimeString('he-IL')}
`;

            const whatsappUrl = `https://wa.me/${whatsappNumber}?text=${encodeURIComponent(message)}`;
            window.open(whatsappUrl, '_blank');
        }

        // קבלת נתוני הזמנה
        function getOrderData() {
            const customerName = document.getElementById('customerName').value;
            const customerPhone = document.getElementById('customerPhone').value;
            const customerEmail = document.getElementById('customerEmail').value;
            const businessName = document.getElementById('businessName').value;
            const specialRequests = document.getElementById('specialRequests').value;
            
            // בדיקת שדות חובה
            if (!customerName || !customerPhone || !customerEmail) {
                alert('אנא מלא את כל השדות החובה: שם, טלפון ואימייל');
                return null;
            }
            
            // איסוף תוספות נבחרות
            const addons = [];
            if (document.getElementById('hosting').checked) addons.push('☁️ אחסון שנתי (+₪180)');
            if (document.getElementById('domain').checked) addons.push('🌐 דומיין .co.il (+₪65)');
            if (document.getElementById('maintenance').checked) addons.push('🔧 תחזוקה שנתית (+₪300)');
            if (document.getElementById('seo').checked) addons.push('🔍 קידום SEO (+₪250)');
            
            return {
                customerName,
                customerPhone,
                customerEmail,
                businessName,
                specialRequests,
                addons: addons.length > 0 ? addons.join('\n') : 'ללא תוספות',
                total: window.currentTotal
            };
        }

        // שליחת הזמנה בWhatsApp
        function sendWhatsAppOrder() {
            const orderData = getOrderData();
            if (!orderData) return;
            
            const basePrice = window.currentWebsite.price;
            const subtotal = basePrice + 
                (document.getElementById('hosting').checked ? 180 : 0) +
                (document.getElementById('domain').checked ? 65 : 0) +
                (document.getElementById('maintenance').checked ? 300 : 0) +
                (document.getElementById('seo').checked ? 250 : 0);
            const discount = subtotal * 0.10;
            
            const message = `🚀 *הזמנה חדשה - WebMaster Pro*

*אתר נבחר:* ${window.currentWebsite.title}
*קטגוריה:* ${window.currentWebsite.category}

*פרטי לקוח:*
👤 שם: ${orderData.customerName}
📱 טלפון: ${orderData.customerPhone}
📧 אימייל: ${orderData.customerEmail}
🏢 עסק: ${orderData.businessName}

*תוספות נבחרות:*
${orderData.addons}

*מחירים:*
💰 מחיר בסיס: ₪${basePrice.toLocaleString()}
➕ תוספות: ₪${(subtotal - basePrice).toLocaleString()}
🎁 הנחת השקה (10%): -₪${discount.toLocaleString()}
✅ *סה"כ: ₪${orderData.total.toLocaleString()}*

*בקשות מיוחדות:*
${orderData.specialRequests || 'אין'}

---
נשלח מהגלריה: https://webmaster-pro-1.netlify.app
תאריך: ${new Date().toLocaleDateString('he-IL')}
`;

            const whatsappUrl = `https://wa.me/${whatsappNumber}?text=${encodeURIComponent(message)}`;
            window.open(whatsappUrl, '_blank');
        }

        // שליחת הזמנה באימייל
        function sendEmailOrder() {
            const orderData = getOrderData();
            if (!orderData) return;
            
            const subject = encodeURIComponent(`הזמנה חדשה - ${window.currentWebsite.title}`);
            const body = encodeURIComponent(`שלום כפיר,

קיבלת הזמנה חדשה מהגלריה:

אתר נבחר: ${window.currentWebsite.title}
קטגוריה: ${window.currentWebsite.category}

פרטי לקוח:
שם: ${orderData.customerName}
טלפון: ${orderData.customerPhone}
אימייל: ${orderData.customerEmail}
עסק: ${orderData.businessName}

תוספות נבחרות:
${orderData.addons}

סה"כ לתשלום: ₪${orderData.total.toLocaleString()}

בקשות מיוחדות:
${orderData.specialRequests || 'אין'}

נשלח מ: https://webmaster-pro-1.netlify.app
תאריך: ${new Date().toLocaleString('he-IL')}
`);

            const emailUrl = `mailto:${emailAddress}?subject=${subject}&body=${body}`;
            window.open(emailUrl, '_blank');
        }

        // אפקטי טעינת תמונות
        function applyImageLoadingEffects() {
            const images = document.querySelectorAll('.card-image');
            
            images.forEach(img => {
                img.addEventListener('load', function() {
                    this.classList.remove('image-loading');
                    this.classList.add('loaded');
                });
                
                // אם התמונה כבר נטענה
                if (img.complete) {
                    img.classList.remove('image-loading');
                    img.classList.add('loaded');
                }
            });
        }

        // סגירת מודל בלחיצה מחוץ לתוכן
        window.onclick = function(event) {
            const modal = document.getElementById('purchaseModal');
            if (event.target === modal) {
                closePurchaseModal();
            }
        }

        // הוספת event listeners לתוספות
        document.addEventListener('DOMContentLoaded', function() {
            applyImageLoadingEffects();
            console.log('WebMaster Pro מוכן עם PayPal אינטגרציה! 🚀');
            
            // Event listeners לעדכון מחיר אוטומטי
            const checkboxes = ['hosting', 'domain', 'maintenance', 'seo'];
            checkboxes.forEach(id => {
                const checkbox = document.getElementById(id);
                if (checkbox) {
                    checkbox.addEventListener('change', calculateTotal);
                }
            });
        });

        // אתחול האפליקציה
        createParticles();
        createWebsiteCards();
    </script>
</body>
</html>
