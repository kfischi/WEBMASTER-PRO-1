<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebMaster Pro - ××“×™×˜×•×¨ ××œ×</title>
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Heebo', sans-serif; background: linear-gradient(135deg, #667eea, #764ba2); color: white; height: 100vh; overflow: hidden; }
        .header { background: rgba(255,255,255,0.1); backdrop-filter: blur(10px); padding: 15px 25px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid rgba(255,255,255,0.2); }
        .logo { font-size: 24px; font-weight: 800; display: flex; align-items: center; gap: 10px; }
        .header-actions { display: flex; gap: 15px; align-items: center; }
        .website-select { background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.3); color: white; padding: 10px 15px; border-radius: 8px; min-width: 300px; font-size: 14px; }
        .website-select option { background: #2d3748; color: white; }
        .header-btn { background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); color: white; padding: 10px 15px; border-radius: 8px; cursor: pointer; font-size: 14px; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px; }
        .header-btn:hover { background: rgba(255,255,255,0.2); transform: translateY(-2px); }
        .main-container { display: flex; height: calc(100vh - 70px); }
        .sidebar { width: 320px; background: rgba(255,255,255,0.1); backdrop-filter: blur(10px); border-right: 1px solid rgba(255,255,255,0.2); display: flex; flex-direction: column; }
        .sidebar-content { flex: 1; padding: 20px; overflow-y: auto; }
        .website-info { background: rgba(255,255,255,0.05); border-radius: 12px; padding: 20px; margin-bottom: 25px; }
        .website-info h3 { color: #f093fb; font-size: 18px; margin-bottom: 15px; font-weight: 700; }
        .info-item { display: flex; justify-content: space-between; margin-bottom: 10px; font-size: 13px; }
        .info-label { color: rgba(255,255,255,0.7); }
        .info-value { color: white; font-weight: 600; }
        .control-section { margin-bottom: 30px; }
        .section-title { font-size: 16px; font-weight: 700; margin-bottom: 20px; color: #f093fb; display: flex; align-items: center; gap: 10px; }
        .control-group { background: rgba(255,255,255,0.08); border-radius: 12px; padding: 20px; margin-bottom: 20px; }
        .control-label { font-size: 14px; font-weight: 600; margin-bottom: 10px; color: rgba(255,255,255,0.9); }
        .control-input { width: 100%; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; padding: 12px; color: white; font-size: 14px; }
        .control-input:focus { outline: none; border-color: #f093fb; }
        .color-input { height: 45px; cursor: pointer; }
        .editor-main { flex: 1; display: flex; flex-direction: column; }
        .editor-toolbar { background: rgba(255,255,255,0.05); padding: 15px 25px; border-bottom: 1px solid rgba(255,255,255,0.2); display: flex; justify-content: space-between; align-items: center; }
        .device-controls { display: flex; gap: 10px; }
        .device-btn { background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); color: white; padding: 10px 15px; border-radius: 8px; cursor: pointer; font-size: 12px; transition: all 0.3s ease; }
        .device-btn.active { background: #f093fb; border-color: #f093fb; }
        .preview-container { flex: 1; padding: 25px; display: flex; justify-content: center; align-items: flex-start; overflow: auto; background: rgba(0,0,0,0.1); }
        .device-frame { background: #1a1a1a; border-radius: 20px; padding: 15px; transition: all 0.4s ease; box-shadow: 0 25px 50px rgba(0,0,0,0.3); }
        .device-frame.desktop { width: 1200px; height: 800px; }
        .device-frame.tablet { width: 768px; height: 1024px; }
        .device-frame.mobile { width: 375px; height: 667px; }
        .preview-iframe { width: 100%; height: 100%; border: none; border-radius: 12px; background: white; }
        .status-bar { background: rgba(255,255,255,0.08); padding: 12px 25px; border-top: 1px solid rgba(255,255,255,0.2); display: flex; justify-content: space-between; align-items: center; font-size: 13px; }
        .notification { position: fixed; top: 25px; right: 25px; background: linear-gradient(135deg, #10b981, #059669); color: white; padding: 15px 25px; border-radius: 12px; z-index: 10000; transform: translateX(120%); transition: transform 0.4s ease; display: flex; align-items: center; gap: 12px; max-width: 400px; }
        .notification.show { transform: translateX(0); }
        .notification.warning { background: linear-gradient(135deg, #f59e0b, #d97706); }
        .notification.error { background: linear-gradient(135deg, #ef4444, #dc2626); }
    </style>
</head>
<body>
    <div class="header">
        <div class="logo"><i class="fas fa-magic"></i> WebMaster Pro</div>
        <div class="header-actions">
            <select class="website-select" id="websiteSelect">
                <option value="">×‘×—×¨ ××ª×¨ ×œ×¢×¨×™×›×” (11 ××ª×¨×™× ××œ××™×)</option>
            </select>
            <button class="header-btn" onclick="saveWebsite()"><i class="fas fa-save"></i> ×©××•×¨</button>
            <button class="header-btn" onclick="previewWebsite()"><i class="fas fa-eye"></i> ×ª×¦×•×’×” ××§×“×™××”</button>
            <button class="header-btn" onclick="exportWebsite()"><i class="fas fa-download"></i> ×™×™×¦× HTML</button>
        </div>
    </div>

    <div class="main-container">
        <div class="sidebar">
            <div class="sidebar-content">
                <div class="website-info" id="websiteInfo">
                    <h3>×¤×¨×˜×™ ×”××ª×¨</h3>
                    <div class="info-item"><span class="info-label">×¡×˜×˜×•×¡:</span><span class="info-value">×œ× × ×˜×¢×Ÿ ××ª×¨</span></div>
                </div>
                
                <div class="control-section">
                    <div class="section-title"><i class="fas fa-palette"></i> ×¦×‘×¢×™× ×•×¢×™×¦×•×‘</div>
                    <div class="control-group">
                        <div class="control-label">×¦×‘×¢ ×¨×§×¢ ×¨××©×™</div>
                        <input type="color" class="control-input color-input" id="bgColor" value="#ffffff">
                    </div>
                    <div class="control-group">
                        <div class="control-label">×¦×‘×¢ ×˜×§×¡×˜</div>
                        <input type="color" class="control-input color-input" id="textColor" value="#333333">
                    </div>
                    <div class="control-group">
                        <div class="control-label">×¦×‘×¢ ×§×™×©×•×¨×™×</div>
                        <input type="color" class="control-input color-input" id="linkColor" value="#667eea">
                    </div>
                </div>
                
                <div class="control-section">
                    <div class="section-title"><i class="fas fa-edit"></i> ×¢×¨×™×›×ª ×ª×•×›×Ÿ</div>
                    <div class="control-group">
                        <div class="control-label">×›×•×ª×¨×ª ×”××ª×¨</div>
                        <input type="text" class="control-input" id="siteTitle" placeholder="×›×•×ª×¨×ª ×”××ª×¨">
                    </div>
                    <div class="control-group">
                        <div class="control-label">×ª×™××•×¨ ×”××ª×¨</div>
                        <textarea class="control-input" id="siteDescription" rows="3" placeholder="×ª×™××•×¨ ×”××ª×¨"></textarea>
                    </div>
                    <div class="control-group">
                        <div class="control-label">×˜×œ×¤×•×Ÿ</div>
                        <input type="text" class="control-input" id="contactPhone" placeholder="052-1234567">
                    </div>
                </div>
            </div>
        </div>
        
        <div class="editor-main">
            <div class="editor-toolbar">
                <div class="device-controls">
                    <button class="device-btn active" data-device="desktop"><i class="fas fa-desktop"></i> Desktop</button>
                    <button class="device-btn" data-device="tablet"><i class="fas fa-tablet-alt"></i> Tablet</button>
                    <button class="device-btn" data-device="mobile"><i class="fas fa-mobile-alt"></i> Mobile</button>
                </div>
            </div>
            
            <div class="preview-container">
                <div class="device-frame desktop" id="deviceFrame">
                    <iframe id="previewIframe" class="preview-iframe" src="about:blank"></iframe>
                </div>
            </div>
        </div>
    </div>

    <div class="status-bar">
        <div><span id="websiteStatus">×¡×˜×˜×•×¡: ×œ× × ×˜×¢×Ÿ ××ª×¨</span></div>
        <div><span id="lastSaved">××•×›×Ÿ ×œ×¢×‘×•×“×”</span></div>
    </div>

    <script>
        let currentWebsite = null;
        
        const websites = {
            'dr-michal-rosen': { name: '×“"×¨ ××™×›×œ ×¨×•×–×Ÿ - ×¨×¤×•××” ××¡×ª×˜×™×ª', category: '×¨×¤×•××” ××¡×ª×˜×™×ª', price: 2800, phone: '052-1234567', description: '××•××—×™×ª ×‘×¨×¤×•××” ××¡×ª×˜×™×ª ××ª×§×“××ª', status: '××•×›×Ÿ ×œ××›×™×¨×”' },
            'fitness-co': { name: '×“× ×™ ×¤×™×˜ - ××××Ÿ ×›×•×©×¨ ××™×©×™', category: '×›×•×©×¨ ×•××™××•× ×™×', price: 2200, phone: '052-2345678', description: '××××Ÿ ×›×•×©×¨ ××•×¡××š ×¢× BMI calculator', status: '××•×›×Ÿ ×œ××›×™×¨×”' },
            'yoga-studio': { name: '×¡×˜×•×“×™×• ××•×”× - ×™×•×’×” ×•××“×™×˜×¦×™×”', category: '×™×•×’×” ×•××“×™×˜×¦×™×”', price: 1900, phone: '052-3456789', description: '××¨×—×‘ ×©×œ ×©×œ×•×•×” ×•×ª× ×•×¢×” ××•×“×¢×ª', status: '××•×›×Ÿ ×œ××›×™×¨×”' },
            'nutritionist': { name: '×“"×¨ ×©×¨×” ×›×”×Ÿ - ×ª×–×•× ××™×ª ×§×œ×™× ×™×ª', category: '×ª×–×•× ×” ×•×‘×¨×™××•×ª', price: 2400, phone: '052-4567890', description: '×ª×–×•× ××™×ª ××•×¡××›×ª ×¢× ××—×©×‘×•×Ÿ BMI', status: '××•×›×Ÿ ×œ××›×™×¨×”' },
            'law-firm': { name: '××©×¨×“ ×‘×¨×§×•×‘×™×¥ - ×¢×•×¨×›×™ ×“×™×Ÿ', category: '×¢×•×¨×›×™ ×“×™×Ÿ', price: 2500, phone: '052-5678901', description: '××©×¨×“ ×¢×•×¨×›×™ ×“×™×Ÿ ××§×¦×•×¢×™', status: '××•×›×Ÿ ×œ××›×™×¨×”' },
            'accountant': { name: '×¨×™× ×” ×œ×•×™ - ×—×©×‘×ª ×©×›×¨', category: '×—×©×‘×•× ××•×ª ×•××™×¡×™×', price: 2000, phone: '08-9998887', description: '×—×©×‘×ª ×©×›×¨ ××•×¡××›×ª', status: '××•×›×Ÿ ×œ××›×™×¨×”' },
            'beauty-salon': { name: '××¡×¤×¨×” BELLA', category: '×™×•×¤×™ ×•×¢×™×¦×•×‘ ×©×™×¢×¨', price: 1700, phone: '054-7890123', description: '××¡×¤×¨×” ××§×¦×•×¢×™×ª ×œ×™×•×¤×™', status: '××•×›×Ÿ ×œ××›×™×¨×”' },
            'tutor': { name: '×“"×¨ ×¨×•× ×™×ª ×œ×•×™ - ××•×¨×” ×¤×¨×˜×™×ª', category: '×—×™× ×•×š ×•×”×•×¨××”', price: 2100, phone: '052-8901234', description: '××•×¨×” ×¤×¨×˜×™×ª ××§×¦×•×¢×™×ª', status: '××•×›×Ÿ ×œ××›×™×¨×”' },
            'aesthetic-clinic': { name: '×§×œ×™× ×™×§×ª ×™×•×¤×™ ×¤×¨××™×•×', category: '××¡×ª×˜×™×§×” ×¨×¤×•××™×ª', price: 3200, phone: '052-0000000', description: '×˜×›× ×•×œ×•×’×™×•×ª ×¢×•×œ××™×•×ª ×‘×¨×¤×•××” ××¡×ª×˜×™×ª', status: '×¤×¨××™×•×' },
            'multibrawn': { name: '××•×œ×˜×™×‘×¨××•×Ÿ - × ×•×¤×© ×•××™×¨×•×¢×™×', category: '× ×•×¤×© ×•××™×¨×•×¢×™×', price: 2300, phone: '052-1111111', description: '× ×•×¤×© ×•××™×¨×•×¢×™× ×‘×¨××” ×¢×•×œ××™×ª', status: '×¦×¨×™×š ×ª×™×§×•×Ÿ' },
            'real-estate': { name: '× ×“×œ"×Ÿ ×¤×¨××™×•×', category: '× ×“×œ"×Ÿ ×•×”×©×§×¢×•×ª', price: 2700, phone: '052-2222222', description: '×”×©×§×¢×•×ª × ×“×œ"×Ÿ ×™×•×§×¨×ª×™×•×ª', status: '×‘×¤×™×ª×•×—' }
        };

        document.addEventListener('DOMContentLoaded', function() {
            loadWebsiteOptions();
            setupEventListeners();
            showNotification('success', '××“×™×˜×•×¨ ××•×›×Ÿ!', '×›×œ 11 ×”××ª×¨×™× ×–××™× ×™× ×œ×¢×¨×™×›×”');
        });

        function loadWebsiteOptions() {
            const select = document.getElementById('websiteSelect');
            for (const [id, site] of Object.entries(websites)) {
                const option = document.createElement('option');
                option.value = id;
                option.textContent = site.name + ' - â‚ª' + site.price.toLocaleString() + ' (' + site.status + ')';
                select.appendChild(option);
            }
            select.addEventListener('change', function() {
                if (this.value) loadWebsite(this.value);
            });
        }

        function setupEventListeners() {
            document.querySelectorAll('.device-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.device-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    const frame = document.getElementById('deviceFrame');
                    frame.className = 'device-frame ' + this.dataset.device;
                });
            });
            
            document.getElementById('bgColor').addEventListener('change', function() {
                applyGlobalStyle('backgroundColor', this.value);
            });
            
            document.getElementById('textColor').addEventListener('change', function() {
                applyGlobalStyle('color', this.value);
            });
            
            document.getElementById('linkColor').addEventListener('change', function() {
                applyLinkStyles(this.value);
            });
            
            document.getElementById('siteTitle').addEventListener('input', function() {
                updateContent('title', this.value);
            });
            
            document.getElementById('siteDescription').addEventListener('input', function() {
                updateContent('subtitle', this.value);
            });
            
            document.getElementById('contactPhone').addEventListener('input', function() {
                updateContent('contact-phone', 'ğŸ“ ' + this.value);
            });
        }

        function loadWebsite(websiteId) {
            if (!websites[websiteId]) return;
            currentWebsite = websites[websiteId];
            updateWebsiteInfo();
            const iframe = document.getElementById('previewIframe');
            iframe.srcdoc = generateWebsiteHTML(websiteId);
            document.getElementById('websiteStatus').textContent = '×˜×¢×•×Ÿ: ' + currentWebsite.name;
            document.getElementById('siteTitle').value = currentWebsite.name;
            document.getElementById('siteDescription').value = currentWebsite.description;
            document.getElementById('contactPhone').value = currentWebsite.phone;
            showNotification('success', '××ª×¨ × ×˜×¢×Ÿ!', '××•×›×Ÿ ×œ×¢×¨×™×›×” ××§×¦×•×¢×™×ª');
        }

        function updateWebsiteInfo() {
            if (!currentWebsite) return;
            const infoPanel = document.getElementById('websiteInfo');
            infoPanel.innerHTML = '<h3>' + currentWebsite.name + '</h3>' +
                '<div class="info-item"><span class="info-label">×§×˜×’×•×¨×™×”:</span><span class="info-value">' + currentWebsite.category + '</span></div>' +
                '<div class="info-item"><span class="info-label">××—×™×¨:</span><span class="info-value">â‚ª' + currentWebsite.price.toLocaleString() + '</span></div>' +
                '<div class="info-item"><span class="info-label">×˜×œ×¤×•×Ÿ:</span><span class="info-value">' + currentWebsite.phone + '</span></div>' +
                '<div class="info-item"><span class="info-label">×¡×˜×˜×•×¡:</span><span class="info-value">' + currentWebsite.status + '</span></div>';
        }

        function generateWebsiteHTML(websiteId) {
            const site = websites[websiteId];
            return '<!DOCTYPE html><html lang="he" dir="rtl"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>' + site.name + '</title><style>* { margin: 0; padding: 0; box-sizing: border-box; } body { font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif; line-height: 1.6; background: linear-gradient(135deg, #f8fafc, #e2e8f0); } .hero { background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 100px 20px; text-align: center; position: relative; overflow: hidden; } .hero::before { content: ""; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: rgba(255,255,255,0.1); backdrop-filter: blur(10px); } .hero-content { position: relative; z-index: 2; } .hero h1 { font-size: 3.5rem; margin-bottom: 20px; font-weight: 800; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); } .hero p { font-size: 1.3rem; opacity: 0.95; max-width: 600px; margin: 0 auto 30px; } .cta-button { background: rgba(255,255,255,0.2); border: 2px solid rgba(255,255,255,0.3); color: white; padding: 15px 30px; border-radius: 50px; font-size: 1.1rem; font-weight: 600; cursor: pointer; transition: all 0.3s ease; backdrop-filter: blur(10px); text-decoration: none; display: inline-block; } .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; } .services { padding: 100px 20px; background: white; } .section-title { text-align: center; font-size: 2.8rem; margin-bottom: 60px; color: #2d3748; font-weight: 700; } .services-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 40px; } .service-card { background: white; padding: 40px; border-radius: 20px; box-shadow: 0 20px 40px rgba(0,0,0,0.1); transition: all 0.3s ease; border-top: 4px solid #667eea; } .service-card:hover { transform: translateY(-10px); box-shadow: 0 30px 60px rgba(0,0,0,0.15); } .service-card h3 { color: #667eea; font-size: 1.6rem; margin-bottom: 20px; font-weight: 700; } .service-card p { color: #4a5568; line-height: 1.8; margin-bottom: 25px; font-size: 1.1rem; } .service-price { background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 15px 25px; border-radius: 25px; font-weight: 700; display: inline-block; font-size: 1.1rem; } .contact { background: linear-gradient(135deg, #2d3748, #4a5568); color: white; padding: 80px 20px; text-align: center; } .contact h2 { font-size: 2.5rem; margin-bottom: 30px; font-weight: 700; } .contact-info { font-size: 1.2rem; margin-bottom: 15px; opacity: 0.9; } .whatsapp-btn { background: #25d366; color: white; padding: 18px 35px; border-radius: 50px; text-decoration: none; display: inline-block; margin-top: 30px; font-weight: 700; font-size: 1.1rem; transition: all 0.3s ease; } [data-editable] { outline: 2px dashed transparent; transition: all 0.3s; cursor: pointer; border-radius: 4px; position: relative; } [data-editable]:hover { outline-color: #667eea; background: rgba(102, 126, 234, 0.05); } [data-editable].selected { outline-color: #f093fb; background: rgba(240, 147, 251, 0.1); } @media (max-width: 768px) { .hero h1 { font-size: 2.5rem; } .services-grid { grid-template-columns: 1fr; } }</style></head><body><section class="hero"><div class="hero-content"><div class="container"><h1 data-editable="title">' + site.name + '</h1><p data-editable="subtitle">' + site.description + '</p><a href="#services" class="cta-button" data-editable="cta">×¦×•×¨ ×§×©×¨ ×¢×›×©×™×•</a></div></div></section><section class="services" id="services"><div class="container"><h2 class="section-title" data-editable="services-title">×”×©×™×¨×•×ª×™× ×”××§×¦×•×¢×™×™× ×©×œ× ×•</h2><div class="services-grid"><div class="service-card"><h3 data-editable="service1-title">×©×™×¨×•×ª ××§×¦×•×¢×™ ×¨××©×•×Ÿ</h3><p data-editable="service1-desc">×ª×™××•×¨ ××¤×•×¨×˜ ×©×œ ×”×©×™×¨×•×ª ×”×¨××©×•×Ÿ ×¢× ×›×œ ×”×¤×¨×˜×™× ×”×—×©×•×‘×™× ×•×”×™×ª×¨×•× ×•×ª ×”×™×™×—×•×“×™×™×</p><div class="service-price" data-editable="service1-price">×”×—×œ ×-â‚ª' + Math.floor(site.price * 0.3) + '</div></div><div class="service-card"><h3 data-editable="service2-title">×™×¢×•×¥ ××§×¦×•×¢×™ ××•×ª××</h3><p data-editable="service2-desc">×™×¢×•×¥ ××•×ª×× ××™×©×™×ª ×œ×¦×¨×›×™× ×©×œ×›× ×¢× × ×™×¡×™×•×Ÿ ×¨×‘ ×©× ×™× ×•××§×¦×•×¢×™×•×ª ×‘×¨××” ×”×’×‘×•×”×” ×‘×™×•×ª×¨</p><div class="service-price" data-editable="service2-price">×”×—×œ ×-â‚ª' + Math.floor(site.price * 0.4) + '</div></div><div class="service-card"><h3 data-editable="service3-title">×ª××™×›×” ×•×œ×™×•×•×™ ××œ×</h3><p data-editable="service3-desc">×ª××™×›×” ×•×œ×™×•×•×™ ××œ× ×œ××•×¨×š ×›×œ ×”×ª×”×œ×™×š ×¢×“ ×œ×ª×•×¦××” ×”××•×©×œ××ª ×¢× ×–××™× ×•×ª ××œ××”</p><div class="service-price" data-editable="service3-price">×”×—×œ ×-â‚ª' + Math.floor(site.price * 0.5) + '</div></div></div></div></section><section class="contact"><div class="container"><h2 data-editable="contact-title">×¦×¨×• ×§×©×¨ ×œ×§×‘×œ×ª ×©×™×¨×•×ª ××§×¦×•×¢×™</h2><div class="contact-info" data-editable="contact-phone">ğŸ“ ' + site.phone + '</div><div class="contact-info" data-editable="contact-email">ğŸ“§ info@' + websiteId + '.co.il</div><div class="contact-info" data-editable="contact-address">ğŸ“ ×ª×œ ××‘×™×‘, ×™×©×¨××œ</div><a href="https://wa.me/972' + site.phone.replace(/[-\s]/g, '') + '" class="whatsapp-btn" data-editable="whatsapp-btn">ğŸ’¬ ×©×œ×—×• ×”×•×“×¢×” ×‘×•×•×˜×¡××¤</a></div></section><script>document.addEventListener("DOMContentLoaded", function() { const editables = document.querySelectorAll("[data-editable]"); editables.forEach(function(el) { el.addEventListener("click", function(e) { e.stopPropagation(); document.querySelectorAll(".selected").forEach(function(s) { s.classList.remove("selected"); }); this.classList.add("selected"); window.parent.postMessage({ type: "element-selected", element: { tag: this.tagName, content: this.textContent, id: this.getAttribute("data-editable") } }, "*"); }); el.addEventListener("dblclick", function(e) { e.stopPropagation(); this.contentEditable = true; this.focus(); const self = this; this.addEventListener("blur", function() { this.contentEditable = false; window.parent.postMessage({ type: "content-updated", element: { id: this.getAttribute("data-editable"), content: this.textContent } }, "*"); }, { once: true }); }); }); });</script></body></html>';
        }

        function applyGlobalStyle(property, value) {
            const iframe = document.getElementById('previewIframe');
            if (!iframe.contentDocument) return;
            const body = iframe.contentDocument.body;
            if (body) {
                body.style[property] = value;
                showNotification('success', '×¡×’× ×•×Ÿ ×”×•×—×œ!', property + ': ' + value);
                updateLastSaved();
            }
        }

        function applyLinkStyles(color) {
            const iframe = document.getElementById('previewIframe');
            if (!iframe.contentDocument) return;
            const links = iframe.contentDocument.querySelectorAll('a');
            links.forEach(link => { link.style.color = color; });
            showNotification('success', '×¦×‘×¢ ×§×™×©×•×¨×™× ×©×•× ×”!', '×¦×‘×¢: ' + color);
            updateLastSaved();
        }

        function updateContent(field, value) {
            if (!currentWebsite) return;
            const iframe = document.getElementById('previewIframe');
            const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
            const element = iframeDoc.querySelector('[data-editable="' + field + '"]');
            if (element) {
                element.textContent = value;
                showNotification('success', '×ª×•×›×Ÿ ×¢×•×“×›×Ÿ!', field + ' × ×©××¨');
                updateLastSaved();
            }
        }

        function updateLastSaved() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('he-IL', { hour: '2-digit', minute: '2-digit' });
            document.getElementById('lastSaved').textContent = '×©××™×¨×” ××—×¨×•× ×”: ' + timeString;
        }

        function saveWebsite() {
            if (!currentWebsite) {
                showNotification('warning', '×˜×¢×Ÿ ××ª×¨', '×‘×—×¨ ××ª×¨ ×œ×¤× ×™ ×©××™×¨×”');
                return;
            }
            showNotification('success', '× ×©××¨!', '×”××ª×¨ × ×©××¨ ×‘×”×¦×œ×—×”');
            updateLastSaved();
        }

        function previewWebsite() {
            if (!currentWebsite) {
                showNotification('warning', '×˜×¢×Ÿ ××ª×¨', '×‘×—×¨ ××ª×¨ ×œ×¤× ×™ ×ª×¦×•×’×” ××§×“×™××”');
                return;
            }
            const iframe = document.getElementById('previewIframe');
            const newWindow = window.open('', '_blank');
            newWindow.document.write(iframe.srcdoc);
            newWindow.document.close();
            showNotification('success', '×ª×¦×•×’×” ××§×“×™××”', '× ×¤×ª×— ×‘×—×œ×•×Ÿ ×—×“×©');
        }

        function exportWebsite() {
            if (!currentWebsite) {
                showNotification('warning', '×˜×¢×Ÿ ××ª×¨', '×‘×—×¨ ××ª×¨ ×œ×¤× ×™ ×™×™×¦×•×');
                return;
            }
            const iframe = document.getElementById('previewIframe');
            const html = iframe.srcdoc;
            const blob = new Blob([html], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = currentWebsite.name.replace(/\s+/g, '-') + '.html';
            a.click();
            URL.revokeObjectURL(url);
            showNotification('success', '×™×™×¦×•× ×”×•×©×œ×!', '×”×§×•×‘×¥ ×”×•×¨×“ ×œ××—×©×‘');
        }

        function showNotification(type, title, message) {
            const existing = document.querySelector('.notification');
            if (existing) existing.remove();
            const notification = document.createElement('div');
            notification.className = 'notification ' + type;
            notification.innerHTML = '<i class="fas fa-check-circle"></i><div><strong>' + title + '</strong><br><small>' + message + '</small></div>';
            document.body.appendChild(notification);
            setTimeout(function() { notification.classList.add('show'); }, 100);
            setTimeout(function() { notification.classList.remove('show'); setTimeout(function() { notification.remove(); }, 300); }, 3000);
        }
    </script>
</body>
</html>
